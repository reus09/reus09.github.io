<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Mybatis | Reus09&#39;s Blog</title>
<meta name="keywords" content="SSM">
<meta name="description" content="MyBatis 这里整理了MyBatis的常见用法 Mybatis 主要对数据库的操作提供了组件 1 环境搭建 导入依赖 &lt;!-- Mybatis核心 --&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mybatis&lt;/artifactId&gt; &lt;version&gt;3.5.7&lt;/version&gt; &lt;/dependency&gt; &lt;!-- MySQL驱动 --&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;">
<meta name="author" content="Reus09">
<link rel="canonical" href="http://www.reus09.top/posts/tech/mybatis/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.40573d180b208ab15c3bf0a170c2ac86aa8ccf179f96f939352198fbee79100e.css" integrity="sha256-QFc9GAsgirFcO/ChcMKshqqMzxeflvk5NSGY&#43;&#43;55EA4=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/20211103151005.jpeg">
<link rel="icon" type="image/png" sizes="16x16" href="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/20211103151005.jpeg">
<link rel="icon" type="image/png" sizes="32x32" href="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/20211103151005.jpeg">
<link rel="apple-touch-icon" href="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/20211103151005.jpeg">
<link rel="mask-icon" href="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/20211103151005.jpeg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Mybatis" />
<meta property="og:description" content="MyBatis 这里整理了MyBatis的常见用法 Mybatis 主要对数据库的操作提供了组件 1 环境搭建 导入依赖 &lt;!-- Mybatis核心 --&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mybatis&lt;/artifactId&gt; &lt;version&gt;3.5.7&lt;/version&gt; &lt;/dependency&gt; &lt;!-- MySQL驱动 --&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://www.reus09.top/posts/tech/mybatis/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-04-29T09:17:06+00:00" />
<meta property="article:modified_time" content="2022-09-11T16:08:48+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Mybatis"/>
<meta name="twitter:description" content="MyBatis 这里整理了MyBatis的常见用法 Mybatis 主要对数据库的操作提供了组件 1 环境搭建 导入依赖 &lt;!-- Mybatis核心 --&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mybatis&lt;/artifactId&gt; &lt;version&gt;3.5.7&lt;/version&gt; &lt;/dependency&gt; &lt;!-- MySQL驱动 --&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "📚文章",
      "item": "http://www.reus09.top/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "👨🏻‍💻技术",
      "item": "http://www.reus09.top/posts/tech/"
    }, 
    {
      "@type": "ListItem",
      "position":  4 ,
      "name": "Mybatis",
      "item": "http://www.reus09.top/posts/tech/mybatis/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Mybatis",
  "name": "Mybatis",
  "description": "MyBatis 这里整理了MyBatis的常见用法 Mybatis 主要对数据库的操作提供了组件 1 环境搭建 导入依赖 \u0026lt;!-- Mybatis核心 --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.mybatis\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;mybatis\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;3.5.7\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;!-- MySQL驱动 --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;mysql\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;mysql-connector-java\u0026lt;/artifactId\u0026gt;",
  "keywords": [
    "SSM"
  ],
  "articleBody": "MyBatis 这里整理了MyBatis的常见用法 Mybatis 主要对数据库的操作提供了组件 1 环境搭建 导入依赖\norg.mybatis mybatis 3.5.7 mysql mysql-connector-java 8.0.27 创建MyBatis的核心配置文件\nmybatis-config.xml\n\u003c?xml version=\"1.0\" encoding=\"UTF-8\" ?\u003e \u003c!DOCTYPE configuration PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-config.dtd\"\u003e ",
  "wordCount" : "8562",
  "inLanguage": "en",
  "datePublished": "2022-04-29T09:17:06Z",
  "dateModified": "2022-09-11T16:08:48+08:00",
  "author":[{
    "@type": "Person",
    "name": "Reus09"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://www.reus09.top/posts/tech/mybatis/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Reus09's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/20211103151005.jpeg"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://www.reus09.top" accesskey="h" title="Reus09&#39;s Blog (Alt + H)">Reus09&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://www.reus09.top/search" title="🔍搜索 (Alt &#43; /)" accesskey=/>
                    <span>🔍搜索</span>
                </a>
            </li>
            <li>
                <a href="http://www.reus09.top/" title="🏠主页">
                    <span>🏠主页</span>
                </a>
            </li>
            <li>
                <a href="http://www.reus09.top/posts" title="📚文章">
                    <span>📚文章</span>
                </a>
            </li>
            <li>
                <a href="http://www.reus09.top/archives/" title="⏱时间轴">
                    <span>⏱时间轴</span>
                </a>
            </li>
            <li>
                <a href="http://www.reus09.top/categories" title="🧩分类">
                    <span>🧩分类</span>
                </a>
            </li>
            <li>
                <a href="http://www.reus09.top/tags" title="🔖标签">
                    <span>🔖标签</span>
                </a>
            </li>
            <li>
                <a href="http://www.reus09.top/about" title="🙋🏻‍♂️关于">
                    <span>🙋🏻‍♂️关于</span>
                </a>
            </li>
            <li>
                <a href="http://www.reus09.top/links" title="🤝友链">
                    <span>🤝友链</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://www.reus09.top">Home</a>&nbsp;»&nbsp;<a href="http://www.reus09.top/posts/">📚文章</a>&nbsp;»&nbsp;<a href="http://www.reus09.top/posts/tech/">👨🏻‍💻技术</a></div>
    <h1 class="post-title">
      Mybatis
    </h1>
    <div class="post-meta"><span title='2022-04-29 09:17:06 +0000 UTC'>2022-04-29</span>&nbsp;·&nbsp;18 min&nbsp;·&nbsp;Reus09

</div>
  </header> <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">Table of Contents</span>
            </summary>

            <div class="inner"><ul>
                    <li>
                        <a href="#mybatis" aria-label="MyBatis">MyBatis</a><ul>
                            
                    <li>
                        <a href="#1-%e7%8e%af%e5%a2%83%e6%90%ad%e5%bb%ba" aria-label="1 环境搭建">1 环境搭建</a></li>
                    <li>
                        <a href="#2-%e5%85%b7%e4%bd%93%e9%85%8d%e7%bd%ae%e5%8f%8a%e8%b0%83%e7%94%a8" aria-label="2 具体配置及调用">2 具体配置及调用</a></li>
                    <li>
                        <a href="#3-%e8%8e%b7%e5%8f%96%e5%8f%82%e6%95%b0" aria-label="3 获取参数">3 获取参数</a><ul>
                            
                    <li>
                        <a href="#31-%e5%8d%95%e4%b8%aa%e5%ad%97%e9%9d%a2%e9%87%8f%e7%b1%bb%e5%9e%8b%e6%95%b0%e6%8d%ae" aria-label="3.1 单个字面量类型数据">3.1 单个字面量类型数据</a></li>
                    <li>
                        <a href="#32-%e5%a4%9a%e4%b8%aa%e4%b8%aa%e5%ad%97%e9%9d%a2%e9%87%8f%e7%b1%bb%e5%9e%8b%e6%95%b0%e6%8d%ae" aria-label="3.2 多个个字面量类型数据">3.2 多个个字面量类型数据</a></li>
                    <li>
                        <a href="#33-map%e9%9b%86%e5%90%88%e7%b1%bb%e5%9e%8b%e7%9a%84%e5%8f%82%e6%95%b0" aria-label="3.3 map集合类型的参数">3.3 map集合类型的参数</a></li>
                    <li>
                        <a href="#34-%e5%ae%9e%e4%bd%93%e7%b1%bb%e7%b1%bb%e5%9e%8b%e7%9a%84%e5%8f%82%e6%95%b0" aria-label="3.4 实体类类型的参数">3.4 实体类类型的参数</a></li>
                    <li>
                        <a href="#35-%e4%bd%bf%e7%94%a8param%e6%a0%87%e8%af%86%e5%8f%82%e6%95%b0" aria-label="3.5 使用@Param标识参数">3.5 使用<code>@Param</code>标识参数</a></li></ul>
                    </li>
                    <li>
                        <a href="#4-%e5%90%84%e7%a7%8d%e6%9f%a5%e8%af%a2" aria-label="4 各种查询">4 各种查询</a></li>
                    <li>
                        <a href="#5-%e7%89%b9%e6%ae%8asql%e7%9a%84%e6%89%a7%e8%a1%8c" aria-label="5 特殊SQL的执行">5 特殊SQL的执行</a><ul>
                            
                    <li>
                        <a href="#51-%e6%a8%a1%e7%b3%8a%e6%9f%a5%e8%af%a2" aria-label="5.1 模糊查询">5.1 模糊查询</a></li>
                    <li>
                        <a href="#52-%e6%89%b9%e9%87%8f%e5%88%a0%e9%99%a4" aria-label="5.2 批量删除">5.2 批量删除</a></li>
                    <li>
                        <a href="#53-%e5%8a%a8%e6%80%81%e8%ae%be%e7%bd%ae%e8%a1%a8%e5%90%8d" aria-label="5.3 动态设置表名">5.3 动态设置表名</a></li>
                    <li>
                        <a href="#54-%e6%b7%bb%e5%8a%a0%e5%8a%9f%e8%83%bd%e8%8e%b7%e5%8f%96%e8%87%aa%e5%a2%9e%e7%9a%84%e4%b8%bb%e9%94%ae" aria-label="5.4 添加功能获取自增的主键">5.4 添加功能获取自增的主键</a></li></ul>
                    </li>
                    <li>
                        <a href="#6-%e8%87%aa%e5%ae%9a%e4%b9%89%e6%98%a0%e5%b0%84resultmap" aria-label="6 自定义映射resultMap">6 自定义映射resultMap</a><ul>
                            
                    <li>
                        <a href="#61-%e4%b8%80%e5%af%b9%e4%b8%80%e6%98%a0%e5%b0%84" aria-label="6.1 一对一映射">6.1 一对一映射</a></li>
                    <li>
                        <a href="#62-%e5%a4%9a%e5%af%b9%e4%b8%80%e6%98%a0%e5%b0%84" aria-label="6.2 多对一映射">6.2 多对一映射</a></li>
                    <li>
                        <a href="#63-%e4%b8%80%e5%af%b9%e5%a4%9a%e6%98%a0%e5%b0%84%e5%a4%84%e7%90%86" aria-label="6.3 一对多映射处理">6.3 一对多映射处理</a></li></ul>
                    </li>
                    <li>
                        <a href="#7-%e5%bb%b6%e8%bf%9f%e5%8a%a0%e8%bd%bd" aria-label="7 延迟加载">7 延迟加载</a></li>
                    <li>
                        <a href="#8-%e5%8a%a8%e6%80%81sql" aria-label="8 动态sql">8 动态sql</a><ul>
                            
                    <li>
                        <a href="#81-if" aria-label="8.1 if">8.1 if</a></li>
                    <li>
                        <a href="#82-where" aria-label="8.2 where">8.2 where</a></li>
                    <li>
                        <a href="#83-trim" aria-label="8.3 trim">8.3 trim</a></li>
                    <li>
                        <a href="#84-choosewhenotherwise" aria-label="8.4 choose、when、otherwise">8.4 choose、when、otherwise</a></li>
                    <li>
                        <a href="#85-foreach" aria-label="8.5 foreach">8.5 foreach</a></li>
                    <li>
                        <a href="#86-sql-%e7%89%87%e6%ae%b5" aria-label="8.6 sql 片段">8.6 sql 片段</a></li></ul>
                    </li>
                    <li>
                        <a href="#9-mybatis%e7%9a%84%e9%80%86%e5%90%91%e5%b7%a5%e7%a8%8b" aria-label="9 MyBatis的逆向工程">9 MyBatis的逆向工程</a></li>
                    <li>
                        <a href="#10-%e9%85%8d%e7%bd%ae%e5%88%86%e9%a1%b5%e6%8f%92%e4%bb%b6" aria-label="10 配置分页插件">10 配置分页插件</a>
                    </li>
                </ul>
                </li>
                </ul>
            </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
         
         activeElement = elements[0];
         const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
         document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
     }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 && 
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
             const id = encodeURI(element.getAttribute('id')).toLowerCase();
             if (element === activeElement){
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
             } else {
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
             }
         })
     }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
</script>

  <div class="post-content"><h1 id="mybatis">MyBatis<a hidden class="anchor" aria-hidden="true" href="#mybatis">#</a></h1>
<ul>
<li>这里整理了<code>MyBatis</code>的常见用法</li>
<li>Mybatis 主要对数据库的操作提供了组件</li>
</ul>
<h2 id="1-环境搭建">1 环境搭建<a hidden class="anchor" aria-hidden="true" href="#1-环境搭建">#</a></h2>
<ul>
<li>
<p>导入依赖</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#007f7f">&lt;!-- Mybatis核心 --&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;groupId&gt;</span>org.mybatis<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;artifactId&gt;</span>mybatis<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;version&gt;</span>3.5.7<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">&lt;!-- MySQL驱动 --&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;groupId&gt;</span>mysql<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;artifactId&gt;</span>mysql-connector-java<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;version&gt;</span>8.0.27<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span></code></pre></div></li>
<li>
<p>创建MyBatis的核心配置文件</p>
<ul>
<li>
<p><code>mybatis-config.xml</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;!DOCTYPE configuration
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        PUBLIC &#34;-//mybatis.org//DTD Config 3.0//EN&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        &#34;http://mybatis.org/dtd/mybatis-3-config.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!-- 核心配置文件中的标签必须按照固定的顺序(有的标签可以不写，但顺序一定不能乱)：
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">properties、settings、typeAliases、
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">typeHandlers、objectFactory、
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">objectWrapperFactory、reflectorFactory、
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">plugins、environments、databaseIdProvider、
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">mappers
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">--&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!-- 引入 jdbc的配置文件 --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;properties</span> <span style="color:#007f7f">resource=</span><span style="color:#0ff;font-weight:bold">&#34;jdbc.properties&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!-- 设置Mybatis 的全局配置--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;settings&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!--将表中字段的下划线自动转换为驼峰--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;setting</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;mapUnderscoreToCamelCase&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;true&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!--开启延迟加载--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;setting</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;lazyLoadingEnabled&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;true&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/settings&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!-- 设置类型别名--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;typeAliases&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!--typeAlias 设置类型别名
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">            type
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">            alias : 设置某个类型的别名，不区分大小写，如果没有设置，则存在一个固定的类名
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">            --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--        &lt;typeAlias type=&#34;com.reus.mybatis.pojo.User&#34; alias = &#34;User&#34;&gt;&lt;/typeAlias&gt;--&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!-- 以包为单位 ，将包下的所有数据设置为默认的类型别名，即类名不区分带大小写 --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;package</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;com.reus.mybatis.pojo&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/typeAliases&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;plugins&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!--设置分页插件--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;plugin</span> <span style="color:#007f7f">interceptor=</span><span style="color:#0ff;font-weight:bold">&#34;com.github.pagehelper.PageInterceptor&#34;</span><span style="font-weight:bold">&gt;&lt;/plugin&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/plugins&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">        environments:配置多个 数据库的环境
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">        属性：
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">            default: 默认使用的环境的Id
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">        --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;environments</span> <span style="color:#007f7f">default=</span><span style="color:#0ff;font-weight:bold">&#34;development&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!-- 配置具体的环境
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">            属性: id, 唯一标识
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">                 asd
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">            --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;environment</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;development&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!-- transactionManager: 设置事务管理方式
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">                    JDBC  当前环境执行sql时，使用JDBC原生的事务管理方式，事务的提交和回滚需要手动处理
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">                    MANAGED ： 被Spring管理
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">                    --&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;transactionManager</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;JDBC&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">&lt;!--制定 数据源
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">                    Type: 数据类型
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">                          POOLED 数据库使用缓存数据库连接
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">                          UNPOOLED 不使用数据库连接池
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">                          JNDI 使用上下文中的数据源
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">                          --&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;dataSource</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;POOLED&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;driver&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;${jdbc.driver}&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;url&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;${jdbc.url}&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;username&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;${jdbc.username}&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;password&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;${jdbc.password}&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;/dataSource&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/environment&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/environments&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--引入映射文件--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;mappers&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--        &lt;mapper resource=&#34;mappers/UserMapper.xml&#34;/&gt;--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!-- 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">               以包为单位引入映射文件
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">               要求
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">               1、mapper接口所在的包要和映射文件所在的包一致
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">               2、mapper接口要和映射文件的名字一致
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">        --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;package</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;com.reus.mybatis.mapper&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/mappers&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></div></li>
</ul>
</li>
</ul>
<h2 id="2-具体配置及调用">2 具体配置及调用<a hidden class="anchor" aria-hidden="true" href="#2-具体配置及调用">#</a></h2>
<ul>
<li>
<p>创建<code>mapper接口</code></p>
<ul>
<li>
<p>MyBatis中的mapper接口相当于以前的dao。但是区别在于，mapper仅仅是接口，我们不需要提供实现类</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">package</span> com.reus.mybatis.mapper;  
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">interface</span> UserMapper {  
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">	* 添加用户信息  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">	*/</span>  
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">int</span> insertUser();  
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
</ul>
</li>
<li>
<p>创建对应的<code>Mybatis</code>映射文件</p>
<ul>
<li>相关概念：ORM（Object Relationship Mapping）对象关系映射。</li>
<li>对象：Java的实体类对象
<ul>
<li>关系：关系型数据库</li>
<li>映射：二者之间的对应关系</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>Java概念</th>
<th>数据库概念</th>
</tr>
</thead>
<tbody>
<tr>
<td>类</td>
<td>表</td>
</tr>
<tr>
<td>属性</td>
<td>字段/列</td>
</tr>
<tr>
<td>对象</td>
<td>记录/行</td>
</tr>
</tbody>
</table>
<ul>
<li>映射文件的命名规则</li>
<li>表所对应的实体类的类名+Mapper.xml
<ul>
<li>例如：表t_user，映射的实体类为User，所对应的映射文件为UserMapper.xml</li>
<li>因此一个映射文件对应一个实体类，对应一张表的操作</li>
<li>MyBatis映射文件用于编写SQL，访问以及操作表中的数据</li>
<li>MyBatis映射文件存放的位置是<code>src/main/resources/mappers</code>目录下</li>
</ul>
</li>
<li>MyBatis中可以面向接口操作数据，要保证两个一致</li>
<li>mapper接口的全类名和映射文件的命名空间<code>（namespace）</code>保持一致
<ul>
<li>mapper接口中方法的方法名和映射文件中编写SQL的标签的id属性保持一致</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;!DOCTYPE mapper
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        PUBLIC &#34;-//mybatis.org//DTD Mapper 3.0//EN&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        &#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;mapper</span> <span style="color:#007f7f">namespace=</span><span style="color:#0ff;font-weight:bold">&#34;com.reus.mybatis.mapper.UserMapper&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--int insertUser();--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;insert</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;insertUser&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        insert into t_user values(null,&#39;张三&#39;,&#39;123&#39;,23,&#39;女&#39;,&#39;123@qq.com&#39;)
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/insert&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--updateUser--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;update</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;updateUser&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        update t_user set username = &#39;李四&#39; where id = 4
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/update&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--void deleteUser();--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;delete</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;deleteUser&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        delete  from t_user where id = 4
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/delete&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--User getUserById();
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">        必须设置对应的标签 resultType 和 resultMap
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">        resultType : 设置默认的映射关系
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">        resultMap: 设置自定义的映射关系
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">    --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;getUserById&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;User&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        select  * from t_user where id = 3
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/select&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--List&lt;User&gt; getAllUser(); --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;getAllUser&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;User&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        select * from t_user;
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/select&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/mapper&gt;</span>
</span></span></code></pre></div></li>
<li>
<p>获取配置中的信息</p>
<ul>
<li>运用<code>SqlsessionFactory</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> UserMapperTest {
</span></span><span style="display:flex;"><span>    @Test
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testInsertUser() <span style="color:#fff;font-weight:bold">throws</span> IOException {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//读取MyBatis的核心配置文件
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        InputStream is = Resources.<span style="color:#007f7f">getResourceAsStream</span>(<span style="color:#0ff;font-weight:bold">&#34;mybatis-config.xml&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//获取SqlSessionFactoryBuilder对象
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        SqlSessionFactoryBuilder sqlSessionFactoryBuilder = <span style="color:#fff;font-weight:bold">new</span> SqlSessionFactoryBuilder();
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//通过核心配置文件所对应的字节输入流创建工厂类SqlSessionFactory，生产SqlSession对象
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        SqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.<span style="color:#007f7f">build</span>(is);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//获取sqlSession，此时通过SqlSession对象所操作的sql都必须手动提交或回滚事务
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#007f7f">//SqlSession sqlSession = sqlSessionFactory.openSession();
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>	    <span style="color:#007f7f">//创建SqlSession对象，此时通过SqlSession对象所操作的sql都会自动提交  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>		SqlSession sqlSession = sqlSessionFactory.<span style="color:#007f7f">openSession</span>(<span style="color:#fff;font-weight:bold">true</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//通过代理模式创建UserMapper接口的代理实现类对象
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        UserMapper userMapper = sqlSession.<span style="color:#007f7f">getMapper</span>(UserMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//调用UserMapper接口中的方法，就可以根据UserMapper的全类名匹配元素文件，通过调用的方法名匹配映射文件中的SQL标签，并执行标签中的SQL语句
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">int</span> result = userMapper.<span style="color:#007f7f">insertUser</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">//提交事务
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#007f7f">//sqlSession.commit();
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;result:&#34;</span> + result);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
</ul>
<h2 id="3-获取参数">3 获取参数<a hidden class="anchor" aria-hidden="true" href="#3-获取参数">#</a></h2>
<ul>
<li>MyBatis获取参数值的两种方式：<code>${}</code>和<code>#{}  </code></li>
<li><code>${}</code>的本质就是字符串拼接，<code>#{}</code>的本质就是占位符赋值</li>
<li><code>${}</code>使用字符串拼接的方式拼接<code>sql</code>，若为字符串类型或日期类型的字段进行赋值时，需要手动加单引号；但是<code>#{}</code>使用占位符赋值的方式拼接sql，此时为字符串类型或日期类型的字段进行赋值时，可以自动添加单引号</li>
</ul>
<h3 id="31-单个字面量类型数据">3.1 单个字面量类型数据<a hidden class="anchor" aria-hidden="true" href="#31-单个字面量类型数据">#</a></h3>
<ul>
<li>
<p>单个字面量类型数据</p>
<ul>
<li>若mapper接口中的方法参数为单个的字面量类型，此时可以使用${}和#{}以任意的名称（最好见名识意）获取参数的值，注意${}需要手动加单引号</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--User getUserByUsername(String username);--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;getUserByUsername&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;User&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>	select * from t_user where username = #{username}
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--User getUserByUsername(String username);--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;getUserByUsername&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;User&#34;</span><span style="font-weight:bold">&gt;</span>  
</span></span><span style="display:flex;"><span>	select * from t_user where username = &#39;${username}&#39;  
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></div></li>
</ul>
<h3 id="32-多个个字面量类型数据">3.2 多个个字面量类型数据<a hidden class="anchor" aria-hidden="true" href="#32-多个个字面量类型数据">#</a></h3>
<ul>
<li>
<p>多个字面量类型的参数</p>
<ul>
<li>
<p>若mapper接口中的方法参数为多个时，此时MyBatis会自动将这些参数放在一个map集合中</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>1. 以arg0,arg1...为键，以参数为值；
</span></span><span style="display:flex;"><span>2. 以param1,param2...为键，以参数为值；
</span></span></code></pre></div></li>
<li>
<p>因此只需要通过<code>\${}</code>和<code>#{}访</code>问map集合的键就可以获取相对应的值，注意${}需要手动加单引号。</p>
</li>
<li>
<p>使用<code>arg</code>或者<code>param</code>都行，要注意的是，arg是从arg0开始的，<code>param</code>是从<code>param1</code>开始的</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--User checkLogin(String username,String password);--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;checkLogin&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;User&#34;</span><span style="font-weight:bold">&gt;</span>  
</span></span><span style="display:flex;"><span>	select * from t_user where username = #{arg0} and password = #{arg1}  
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--User checkLogin(String username,String password);--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;checkLogin&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;User&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>	select * from t_user where username = &#39;${param1}&#39; and password = &#39;${param2}&#39;
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></div></li>
</ul>
</li>
</ul>
<h3 id="33-map集合类型的参数">3.3 map集合类型的参数<a hidden class="anchor" aria-hidden="true" href="#33-map集合类型的参数">#</a></h3>
<ul>
<li>
<p>若<code>mapper</code>接口中的方法需要的参数为多个时，此时可以手动创建map集合，将这些数据放在map中只需要通过<code>\${}和#{}</code>访问map集合的键就可以获取相对应的值，注意<code>${}</code>需要手动加单引号</p>
<ul>
<li>即手动创建一个<code>map</code>集合，作为参数传递给配置，配置中即可使用<code>map</code>来获取数据</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--User checkLoginByMap(Map&lt;String,Object&gt; map);--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;checkLoginByMap&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;User&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>	select * from t_user where username = #{username} and password = #{password}
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> checkLoginByMap() {
</span></span><span style="display:flex;"><span>	SqlSession sqlSession = SqlSessionUtils.<span style="color:#007f7f">getSqlSession</span>();
</span></span><span style="display:flex;"><span>	ParameterMapper mapper = sqlSession.<span style="color:#007f7f">getMapper</span>(ParameterMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>	Map&lt;String,Object&gt; map = <span style="color:#fff;font-weight:bold">new</span> HashMap&lt;&gt;();
</span></span><span style="display:flex;"><span>	map.<span style="color:#007f7f">put</span>(<span style="color:#0ff;font-weight:bold">&#34;usermane&#34;</span>,<span style="color:#0ff;font-weight:bold">&#34;admin&#34;</span>);
</span></span><span style="display:flex;"><span>	map.<span style="color:#007f7f">put</span>(<span style="color:#0ff;font-weight:bold">&#34;password&#34;</span>,<span style="color:#0ff;font-weight:bold">&#34;123456&#34;</span>);
</span></span><span style="display:flex;"><span>	User user = mapper.<span style="color:#007f7f">checkLoginByMap</span>(map);
</span></span><span style="display:flex;"><span>	System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(user);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
</ul>
<h3 id="34-实体类类型的参数">3.4 实体类类型的参数<a hidden class="anchor" aria-hidden="true" href="#34-实体类类型的参数">#</a></h3>
<ul>
<li>
<p>若mapper接口中的方法参数为实体类对象时此时可以使用<code>\${}和#{}</code>，通过访问实体类对象中的属性名获取属性值，注意<code>${}</code>需要手动加单引号</p>
<ul>
<li>这是应为一个类型中的参数名相当与<code>map</code> 中的<code>key</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--int insertUser(User user);--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;insert</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;insertUser&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>	insert into t_user values(null,#{username},#{password},#{age},#{sex},#{email})
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/insert&gt;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> insertUser() {
</span></span><span style="display:flex;"><span>	SqlSession sqlSession = SqlSessionUtils.<span style="color:#007f7f">getSqlSession</span>();
</span></span><span style="display:flex;"><span>	ParameterMapper mapper = sqlSession.<span style="color:#007f7f">getMapper</span>(ParameterMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>	User user = <span style="color:#fff;font-weight:bold">new</span> User(<span style="color:#fff;font-weight:bold">null</span>,<span style="color:#0ff;font-weight:bold">&#34;Tom&#34;</span>,<span style="color:#0ff;font-weight:bold">&#34;123456&#34;</span>,12,<span style="color:#0ff;font-weight:bold">&#34;男&#34;</span>,<span style="color:#0ff;font-weight:bold">&#34;123@321.com&#34;</span>);
</span></span><span style="display:flex;"><span>	mapper.<span style="color:#007f7f">insertUser</span>(user);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
</ul>
<h3 id="35-使用param标识参数">3.5 使用<code>@Param</code>标识参数<a hidden class="anchor" aria-hidden="true" href="#35-使用param标识参数">#</a></h3>
<ul>
<li>
<p>可以通过@Param注解标识mapper接口中的方法参数，此时，会将这些参数放在map集合中</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--User CheckLoginByParam(@Param(&#34;username&#34;) String username, @Param(&#34;password&#34;) String password);--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;CheckLoginByParam&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;User&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        select * from t_user where username = #{username} and password = #{password}
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></div></li>
</ul>
<h2 id="4-各种查询">4 各种查询<a hidden class="anchor" aria-hidden="true" href="#4-各种查询">#</a></h2>
<ul>
<li>
<p>如果查询出的数据只有一条，可以通过</p>
<ol>
<li>实体类对象接收</li>
<li>List集合接收</li>
<li>Map集合接收，结果<code>{password=123456, sex=男, id=1, age=23, username=admin}</code></li>
</ol>
</li>
<li>
<p>如果查询出的数据有多条，一定不能用实体类对象接收，会抛异常TooManyResultsException，可以通过</p>
<ol>
<li>实体类类型的LIst集合接收</li>
<li>Map类型的LIst集合接收</li>
<li>在mapper接口的方法上添加<code>@MapKey</code>注解</li>
</ol>
</li>
<li>
<p>因为查询数据只有一条较为简单，就不在赘述，这里只讲一下多条数据的情况</p>
</li>
<li>
<p>多条数据</p>
<ul>
<li>
<p>法一</p>
<ul>
<li>查询结果为一个<code>map</code>的<code>list</code>集合</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">/**  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * 查询所有用户信息为map集合  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @return  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * 将表中的数据以map集合的方式查询，一条数据对应一个map；若有多条数据，就会产生多个map集合，此时可以将这些map放在一个list集合中获取  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>  
</span></span><span style="display:flex;"><span>List&lt;Map&lt;String, Object&gt;&gt; getAllUserToMap();
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--Map&lt;String, Object&gt; getAllUserToMap();--&gt;</span>  
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;getAllUserToMap&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;map&#34;</span><span style="font-weight:bold">&gt;</span>  
</span></span><span style="display:flex;"><span>	select * from t_user  
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">	结果：
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">	[{password=123456, sex=男, id=1, age=23, username=admin},
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">	{password=123456, sex=男, id=2, age=23, username=张三},
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">	{password=123456, sex=男, id=3, age=23, username=张三}]
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">--&gt;</span>
</span></span></code></pre></div></li>
<li>
<p>法二</p>
<ul>
<li>根据<code>@MapKey</code>指定一个主键</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * 查询所有用户信息为map集合
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @return
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * 将表中的数据以map集合的方式查询，一条数据对应一个map；若有多条数据，就会产生多个map集合，并且最终要以一个map的方式返回数据，此时需要通过@MapKey注解设置map集合的键，值是每条数据所对应的map集合
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span>@MapKey(<span style="color:#0ff;font-weight:bold">&#34;id&#34;</span>)
</span></span><span style="display:flex;"><span>Map&lt;String, Object&gt; getAllUserToMap();
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--Map&lt;String, Object&gt; getAllUserToMap();--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;getAllUserToMap&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;map&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>	select * from t_user
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">	结果：
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">	{
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">	1={password=123456, sex=男, id=1, age=23, username=admin},
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">	2={password=123456, sex=男, id=2, age=23, username=张三},
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">	3={password=123456, sex=男, id=3, age=23, username=张三}
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">	}
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">--&gt;</span>
</span></span></code></pre></div></li>
</ul>
</li>
</ul>
<h2 id="5-特殊sql的执行">5 特殊SQL的执行<a hidden class="anchor" aria-hidden="true" href="#5-特殊sql的执行">#</a></h2>
<h3 id="51-模糊查询">5.1 模糊查询<a hidden class="anchor" aria-hidden="true" href="#51-模糊查询">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * 根据用户名进行模糊查询
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @param username 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @return java.util.List&lt;com.atguigu.mybatis.pojo.User&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @date 2022/2/26 21:56
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span>List&lt;User&gt; getUserByLike(@Param(<span style="color:#0ff;font-weight:bold">&#34;username&#34;</span>) String username);
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--List&lt;User&gt; getUserByLike(@Param(&#34;username&#34;) String username);--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;getUserByLike&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;User&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">&lt;!--select * from t_user where username like &#39;%${mohu}%&#39;--&gt;</span>  
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">&lt;!--select * from t_user where username like concat(&#39;%&#39;,#{mohu},&#39;%&#39;)--&gt;</span>  
</span></span><span style="display:flex;"><span>	select * from t_user where username like &#34;%&#34;#{mohu}&#34;%&#34;
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></div><ul>
<li>其中<code>select * from t_user where username like &quot;%&quot;#{mohu}&quot;%&quot;</code>是最常用的</li>
</ul>
<h3 id="52-批量删除">5.2 批量删除<a hidden class="anchor" aria-hidden="true" href="#52-批量删除">#</a></h3>
<ul>
<li>
<p>只能使用<code>${}</code>，如果使用<code>#{}</code>，则解析后的sql语句为<code>delete from t_user where id in ('1,2,3')</code>，这样是将<code>1,2,3</code>看做是一个整体，只有id为<code>1,2,3</code>的数据会被删除。正确的语句应该是<code>delete from t_user where id in (1,2,3)</code>，或者<code>delete from t_user where id in ('1','2','3')</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * 根据id批量删除
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @param ids 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @return int
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @date 2022/2/26 22:06
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">int</span> deleteMore(@Param(<span style="color:#0ff;font-weight:bold">&#34;ids&#34;</span>) String ids);
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;delete</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;deleteMore&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>	delete from t_user where id in (${ids})
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/delete&gt;</span>
</span></span></code></pre></div></li>
</ul>
<h3 id="53-动态设置表名">5.3 动态设置表名<a hidden class="anchor" aria-hidden="true" href="#53-动态设置表名">#</a></h3>
<ul>
<li>
<p>只能使用<code>${}</code>，因为表名不能加单引号</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * 查询指定表中的数据
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @param tableName 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @return java.util.List&lt;com.atguigu.mybatis.pojo.User&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @date 2022/2/27 14:41
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span>List&lt;User&gt; getUserByTable(@Param(<span style="color:#0ff;font-weight:bold">&#34;tableName&#34;</span>) String tableName);
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--List&lt;User&gt; getUserByTable(@Param(&#34;tableName&#34;) String tableName);--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;getUserByTable&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;User&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>	select * from ${tableName}
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></div></li>
</ul>
<h3 id="54-添加功能获取自增的主键">5.4 添加功能获取自增的主键<a hidden class="anchor" aria-hidden="true" href="#54-添加功能获取自增的主键">#</a></h3>
<ul>
<li>
<p>使用场景</p>
</li>
<li>
<p>t_clazz(clazz_id,clazz_name)</p>
<ul>
<li>t_student(student_id,student_name,clazz_id)</li>
</ul>
<ol>
<li>添加班级信息</li>
<li>获取新添加的班级的id</li>
<li>为班级分配学生，即将某学的班级id修改为新添加的班级的id</li>
</ol>
</li>
<li>
<p>在mapper.xml中设置两个属性</p>
</li>
<li>
<p>useGeneratedKeys：设置使用自增的主键</p>
<ul>
<li>
<p>keyProperty：因为增删改有统一的返回值是受影响的行数，因此只能将获取的自增的主键放在传输的参数user对象的某个属性中</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * 添加用户信息
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @param user 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @date 2022/2/27 15:04
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">void</span> insertUser(User user);
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--void insertUser(User user);--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;insert</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;insertUser&#34;</span> <span style="color:#007f7f">useGeneratedKeys=</span><span style="color:#0ff;font-weight:bold">&#34;true&#34;</span> <span style="color:#007f7f">keyProperty=</span><span style="color:#0ff;font-weight:bold">&#34;id&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>	insert into t_user values (null,#{username},#{password},#{age},#{sex},#{email})
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/insert&gt;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">//测试类
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> insertUser() {
</span></span><span style="display:flex;"><span>	SqlSession sqlSession = SqlSessionUtils.<span style="color:#007f7f">getSqlSession</span>();
</span></span><span style="display:flex;"><span>	SQLMapper mapper = sqlSession.<span style="color:#007f7f">getMapper</span>(SQLMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>	User user = <span style="color:#fff;font-weight:bold">new</span> User(<span style="color:#fff;font-weight:bold">null</span>, <span style="color:#0ff;font-weight:bold">&#34;ton&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;123&#34;</span>, 23, <span style="color:#0ff;font-weight:bold">&#34;男&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;123@321.com&#34;</span>);
</span></span><span style="display:flex;"><span>	mapper.<span style="color:#007f7f">insertUser</span>(user);
</span></span><span style="display:flex;"><span>	System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(user);
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//输出：user{id=10, username=&#39;ton&#39;, password=&#39;123&#39;, age=23, sex=&#39;男&#39;, email=&#39;123@321.com&#39;}，自增主键存放到了user的id属性中
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>}
</span></span></code></pre></div></li>
<li>
<p>因为如果不设置<code>useGeneratedKeys</code>,我们插入之后，得到的这个<code>user</code>对象的<code>id</code>没有设置，仍为<code>null</code>，假如它的目的即为将数据插入到数据库中得到的<code>id</code>返回给后端的<code>user</code>对象，对其赋值</p>
</li>
</ul>
</li>
</ul>
<h2 id="6-自定义映射resultmap">6 自定义映射resultMap<a hidden class="anchor" aria-hidden="true" href="#6-自定义映射resultmap">#</a></h2>
<ul>
<li><code>resultMap</code>：设置自定义映射</li>
<li>属性：
<ul>
<li>id：表示自定义映射的唯一标识，不能重复</li>
<li>type：查询的数据要映射的实体类的类型</li>
<li>子标签：</li>
<li>id：设置主键的映射关系
<ul>
<li>result：设置普通字段的映射关系</li>
<li>子标签属性：</li>
<li>property：设置映射关系中实体类中的属性名
<ul>
<li>column：设置映射关系中表中的字段名</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="61-一对一映射">6.1 一对一映射<a hidden class="anchor" aria-hidden="true" href="#61-一对一映射">#</a></h3>
<ul>
<li>
<p>若字段名和实体类中的属性名不一致，则可以通过resultMap设置自定义映射，即使字段名和属性名一致的属性也要映射，也就是全部属性都要列出来</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;resultMap</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;empResultMap&#34;</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;Emp&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;id</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;eid&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;eid&#34;</span><span style="font-weight:bold">&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;empName&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;emp_name&#34;</span><span style="font-weight:bold">&gt;&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;age&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;age&#34;</span><span style="font-weight:bold">&gt;&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;sex&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;sex&#34;</span><span style="font-weight:bold">&gt;&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;email&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;email&#34;</span><span style="font-weight:bold">&gt;&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/resultMap&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--List&lt;Emp&gt; getAllEmp();--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;getAllEmp&#34;</span> <span style="color:#007f7f">resultMap=</span><span style="color:#0ff;font-weight:bold">&#34;empResultMap&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>	select * from t_emp
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></div></li>
<li>
<p>若字段名和实体类中的属性名不一致，但是字段名符合数据库的规则（使用_），实体类中的属性名符合Java的规则（使用驼峰）。此时也可通过以下两种方式处理字段名和实体类中的属性的映射关系</p>
<ul>
<li>
<p><code>sql</code>语句中字段起别名</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">select</span> eid,emp_name empName,age,sex,email <span style="color:#fff;font-weight:bold">from</span> t_emp
</span></span></code></pre></div></li>
<li>
<p>开启<code>mapUnderscoreToCamelCase</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;settings&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;setting</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;mapUnderscoreToCamelCase&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;true&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/settings&gt;</span>
</span></span></code></pre></div></li>
</ul>
</li>
</ul>
<h3 id="62-多对一映射">6.2 多对一映射<a hidden class="anchor" aria-hidden="true" href="#62-多对一映射">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Emp {  
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">private</span> Integer eid;  
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">private</span> String empName;  
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">private</span> Integer age;  
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">private</span> String sex;  
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">private</span> String email;  
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">private</span> Dept dept;
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//...构造器、get、set方法等
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>}
</span></span></code></pre></div><ul>
<li>
<p>级联方式处理映射关系</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;resultMap</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;empAndDeptResultMapOne&#34;</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;Emp&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;id</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;eid&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;eid&#34;</span><span style="font-weight:bold">&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;empName&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;emp_name&#34;</span><span style="font-weight:bold">&gt;&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;age&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;age&#34;</span><span style="font-weight:bold">&gt;&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;sex&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;sex&#34;</span><span style="font-weight:bold">&gt;&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;email&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;email&#34;</span><span style="font-weight:bold">&gt;&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;dept.did&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;did&#34;</span><span style="font-weight:bold">&gt;&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;dept.deptName&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;dept_name&#34;</span><span style="font-weight:bold">&gt;&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/resultMap&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--Emp getEmpAndDept(@Param(&#34;eid&#34;)Integer eid);--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;getEmpAndDept&#34;</span> <span style="color:#007f7f">resultMap=</span><span style="color:#0ff;font-weight:bold">&#34;empAndDeptResultMapOne&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>	select * from t_emp left join t_dept on t_emp.eid = t_dept.did where t_emp.eid = #{eid}
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></div></li>
<li>
<p>使用association处理映射关系</p>
<ul>
<li><code>association</code>：处理多对一的映射关系</li>
<li><code>property</code>：需要处理多对的映射关系的属性名</li>
<li><code>javaType</code>：该属性的类型</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;resultMap</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;empAndDeptResultMapTwo&#34;</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;Emp&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;id</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;eid&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;eid&#34;</span><span style="font-weight:bold">&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;empName&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;emp_name&#34;</span><span style="font-weight:bold">&gt;&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;age&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;age&#34;</span><span style="font-weight:bold">&gt;&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;sex&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;sex&#34;</span><span style="font-weight:bold">&gt;&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;email&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;email&#34;</span><span style="font-weight:bold">&gt;&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;association</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;dept&#34;</span> <span style="color:#007f7f">javaType=</span><span style="color:#0ff;font-weight:bold">&#34;Dept&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;id</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;did&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;did&#34;</span><span style="font-weight:bold">&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;deptName&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;dept_name&#34;</span><span style="font-weight:bold">&gt;&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;/association&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/resultMap&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--Emp getEmpAndDept(@Param(&#34;eid&#34;)Integer eid);--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;getEmpAndDept&#34;</span> <span style="color:#007f7f">resultMap=</span><span style="color:#0ff;font-weight:bold">&#34;empAndDeptResultMapTwo&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>	select * from t_emp left join t_dept on t_emp.eid = t_dept.did where t_emp.eid = #{eid}
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></div></li>
<li>
<p>分布查询</p>
<ul>
<li>
<p>其实就是将另一条<code>mapper</code>实现的<code>sql</code>语句根据<code>select=&quot;com.atguigu.mybatis.mapper.DeptMapper.getEmpAndDeptByStepTwo&quot; column=&quot;did&quot;</code>导入进来</p>
</li>
<li>
<p>查询员工信息</p>
<ul>
<li>select：设置分布查询的sql的唯一标识（namespace.SQLId或mapper接口的全类名.方法名）</li>
<li>column：设置分步查询的条件</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">//EmpMapper里的方法
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * 通过分步查询，员工及所对应的部门信息
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * 分步查询第一步：查询员工信息
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @param  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @return com.atguigu.mybatis.pojo.Emp
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @date 2022/2/27 20:17
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span>Emp getEmpAndDeptByStepOne(@Param(<span style="color:#0ff;font-weight:bold">&#34;eid&#34;</span>) Integer eid);
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;resultMap</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;empAndDeptByStepResultMap&#34;</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;Emp&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;id</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;eid&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;eid&#34;</span><span style="font-weight:bold">&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;empName&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;emp_name&#34;</span><span style="font-weight:bold">&gt;&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;age&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;age&#34;</span><span style="font-weight:bold">&gt;&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;sex&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;sex&#34;</span><span style="font-weight:bold">&gt;&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;email&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;email&#34;</span><span style="font-weight:bold">&gt;&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;association</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;dept&#34;</span>
</span></span><span style="display:flex;"><span>				 <span style="color:#007f7f">select=</span><span style="color:#0ff;font-weight:bold">&#34;com.atguigu.mybatis.mapper.DeptMapper.getEmpAndDeptByStepTwo&#34;</span>
</span></span><span style="display:flex;"><span>				 <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;did&#34;</span><span style="font-weight:bold">&gt;&lt;/association&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/resultMap&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--Emp getEmpAndDeptByStepOne(@Param(&#34;eid&#34;) Integer eid);--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;getEmpAndDeptByStepOne&#34;</span> <span style="color:#007f7f">resultMap=</span><span style="color:#0ff;font-weight:bold">&#34;empAndDeptByStepResultMap&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>	select * from t_emp where eid = #{eid}
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></div></li>
<li>
<p>查询部门信息</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">//DeptMapper里的方法
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * 通过分步查询，员工及所对应的部门信息
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * 分步查询第二步：通过did查询员工对应的部门信息
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @param
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @return com.atguigu.mybatis.pojo.Emp
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @date 2022/2/27 20:23
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span>Dept getEmpAndDeptByStepTwo(@Param(<span style="color:#0ff;font-weight:bold">&#34;did&#34;</span>) Integer did);
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--此处的resultMap仅是处理字段和属性的映射关系--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;resultMap</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;EmpAndDeptByStepTwoResultMap&#34;</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;Dept&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;id</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;did&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;did&#34;</span><span style="font-weight:bold">&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;deptName&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;dept_name&#34;</span><span style="font-weight:bold">&gt;&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/resultMap&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--Dept getEmpAndDeptByStepTwo(@Param(&#34;did&#34;) Integer did);--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;getEmpAndDeptByStepTwo&#34;</span> <span style="color:#007f7f">resultMap=</span><span style="color:#0ff;font-weight:bold">&#34;EmpAndDeptByStepTwoResultMap&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>	select * from t_dept where did = #{did}
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></div></li>
</ul>
<h3 id="63-一对多映射处理">6.3 一对多映射处理<a hidden class="anchor" aria-hidden="true" href="#63-一对多映射处理">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Dept {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> Integer did;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> String deptName;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">private</span> List&lt;Emp&gt; emps;
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//...构造器、get、set方法等
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>}
</span></span></code></pre></div><ul>
<li>
<p><code>collection</code></p>
<ul>
<li>collection：用来处理一对多的映射关系</li>
<li>ofType：表示该属性对饮的集合中存储的数据的类型</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;resultMap</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;DeptAndEmpResultMap&#34;</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;Dept&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;id</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;did&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;did&#34;</span><span style="font-weight:bold">&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;deptName&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;dept_name&#34;</span><span style="font-weight:bold">&gt;&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;collection</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;emps&#34;</span> <span style="color:#007f7f">ofType=</span><span style="color:#0ff;font-weight:bold">&#34;Emp&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;id</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;eid&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;eid&#34;</span><span style="font-weight:bold">&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;empName&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;emp_name&#34;</span><span style="font-weight:bold">&gt;&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;age&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;age&#34;</span><span style="font-weight:bold">&gt;&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;sex&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;sex&#34;</span><span style="font-weight:bold">&gt;&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;email&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;email&#34;</span><span style="font-weight:bold">&gt;&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;/collection&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/resultMap&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--Dept getDeptAndEmp(@Param(&#34;did&#34;) Integer did);--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;getDeptAndEmp&#34;</span> <span style="color:#007f7f">resultMap=</span><span style="color:#0ff;font-weight:bold">&#34;DeptAndEmpResultMap&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>	select * from t_dept left join t_emp on t_dept.did = t_emp.did where t_dept.did = #{did}
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></div></li>
<li>
<p>分步查询</p>
<ul>
<li>
<p>查询部门信息</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * 通过分步查询，查询部门及对应的所有员工信息
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * 分步查询第一步：查询部门信息
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @param did 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @return com.atguigu.mybatis.pojo.Dept
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @date 2022/2/27 22:04
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span>Dept getDeptAndEmpByStepOne(@Param(<span style="color:#0ff;font-weight:bold">&#34;did&#34;</span>) Integer did);
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;resultMap</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;DeptAndEmpByStepOneResultMap&#34;</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;Dept&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;id</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;did&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;did&#34;</span><span style="font-weight:bold">&gt;&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;result</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;deptName&#34;</span> <span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;dept_name&#34;</span><span style="font-weight:bold">&gt;&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;collection</span> <span style="color:#007f7f">property=</span><span style="color:#0ff;font-weight:bold">&#34;emps&#34;</span>
</span></span><span style="display:flex;"><span>				<span style="color:#007f7f">select=</span><span style="color:#0ff;font-weight:bold">&#34;com.atguigu.mybatis.mapper.EmpMapper.getDeptAndEmpByStepTwo&#34;</span>
</span></span><span style="display:flex;"><span>				<span style="color:#007f7f">column=</span><span style="color:#0ff;font-weight:bold">&#34;did&#34;</span><span style="font-weight:bold">&gt;&lt;/collection&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/resultMap&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--Dept getDeptAndEmpByStepOne(@Param(&#34;did&#34;) Integer did);--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;getDeptAndEmpByStepOne&#34;</span> <span style="color:#007f7f">resultMap=</span><span style="color:#0ff;font-weight:bold">&#34;DeptAndEmpByStepOneResultMap&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>	select * from t_dept where did = #{did}
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></div></li>
<li>
<p>根据部门id查询部门中的所有员工</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * 通过分步查询，查询部门及对应的所有员工信息
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * 分步查询第二步：根据部门id查询部门中的所有员工
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @param did
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @return java.util.List&lt;com.atguigu.mybatis.pojo.Emp&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> * @date 2022/2/27 22:10
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> */</span>
</span></span><span style="display:flex;"><span>List&lt;Emp&gt; getDeptAndEmpByStepTwo(@Param(<span style="color:#0ff;font-weight:bold">&#34;did&#34;</span>) Integer did);
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--List&lt;Emp&gt; getDeptAndEmpByStepTwo(@Param(&#34;did&#34;) Integer did);--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;getDeptAndEmpByStepTwo&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;Emp&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>	select * from t_emp where did = #{did}
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></div></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="7-延迟加载">7 延迟加载<a hidden class="anchor" aria-hidden="true" href="#7-延迟加载">#</a></h2>
<ul>
<li>
<p>在<code>mybatis-config.xml</code>里面配置延迟加载</p>
<ul>
<li>lazyLoadingEnabled：延迟加载的全局开关。当开启时，所有关联对象都会延迟加载
<ul>
<li>aggressiveLazyLoading：当开启时，任何方法的调用都会加载该对象的所有属性。 否则，每个属性会按需加载</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;settings&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">&lt;!--开启延迟加载--&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;setting</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;lazyLoadingEnabled&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;true&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/settings&gt;</span>
</span></span></code></pre></div></li>
<li>
<p>开启延迟加载后，查询相关内容是，只有需要用到的时候，服务才去调用相应的程序。</p>
</li>
</ul>
<h2 id="8-动态sql">8 动态sql<a hidden class="anchor" aria-hidden="true" href="#8-动态sql">#</a></h2>
<h3 id="81-if">8.1 if<a hidden class="anchor" aria-hidden="true" href="#81-if">#</a></h3>
<ul>
<li>if标签可通过test属性（即传递过来的数据）的表达式进行判断，若表达式的结果为true，则标签中的内容会执行；反之标签中的内容不会执行</li>
<li>在where后面添加一个恒成立条件<code>1=1</code></li>
<li>这个恒成立条件并不会影响查询的结果
<ul>
<li>这个<code>1=1</code>可以用来拼接<code>and</code>语句，例如：当empName为null时</li>
<li>如果不加上恒成立条件，则SQL语句为<code>select * from t_emp where and age = ? and sex = ? and email = ?</code>，此时<code>where</code>会与<code>and</code>连用，SQL语句会报错
<ul>
<li>如果加上一个恒成立条件，则SQL语句为<code>select * from t_emp where 1= 1 and age = ? and sex = ? and email = ?</code>，此时不报错</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--List&lt;Emp&gt; getEmpByCondition(Emp emp);--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;getEmpByCondition&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;Emp&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>	select * from t_emp where 1=1
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;if</span> <span style="color:#007f7f">test=</span><span style="color:#0ff;font-weight:bold">&#34;empName != null and empName !=&#39;&#39;&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>		and emp_name = #{empName}
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;if</span> <span style="color:#007f7f">test=</span><span style="color:#0ff;font-weight:bold">&#34;age != null and age !=&#39;&#39;&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>		and age = #{age}
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;if</span> <span style="color:#007f7f">test=</span><span style="color:#0ff;font-weight:bold">&#34;sex != null and sex !=&#39;&#39;&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>		and sex = #{sex}
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;if</span> <span style="color:#007f7f">test=</span><span style="color:#0ff;font-weight:bold">&#34;email != null and email !=&#39;&#39;&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>		and email = #{email}
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></div><h3 id="82-where">8.2 where<a hidden class="anchor" aria-hidden="true" href="#82-where">#</a></h3>
<ul>
<li>
<p>where和if一般结合使用：</p>
</li>
<li>
<p>解决前面带有<code>and </code> 或者 <code>or</code></p>
</li>
<li>
<p>若where标签中的if条件都不满足，则where标签没有任何功能，即不会添加where关键字</p>
<ul>
<li>若where标签中的if条件满足，则where标签会自动添加where关键字，并将条件<strong>最前方多余的and/or去掉</strong></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--List&lt;Emp&gt; getEmpByCondition(Emp emp);--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;getEmpByCondition&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;Emp&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>	select * from t_emp
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;where&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;if</span> <span style="color:#007f7f">test=</span><span style="color:#0ff;font-weight:bold">&#34;empName != null and empName !=&#39;&#39;&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>			emp_name = #{empName}
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;if</span> <span style="color:#007f7f">test=</span><span style="color:#0ff;font-weight:bold">&#34;age != null and age !=&#39;&#39;&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>			and age = #{age}
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;if</span> <span style="color:#007f7f">test=</span><span style="color:#0ff;font-weight:bold">&#34;sex != null and sex !=&#39;&#39;&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>			and sex = #{sex}
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;if</span> <span style="color:#007f7f">test=</span><span style="color:#0ff;font-weight:bold">&#34;email != null and email !=&#39;&#39;&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>			and email = #{email}
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;/where&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></div></li>
<li>
<p>注意：<strong>where标签不能去掉条件后多余的and/or</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--这种用法是错误的，只能去掉条件前面的and/or，条件后面的不行--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;if</span> <span style="color:#007f7f">test=</span><span style="color:#0ff;font-weight:bold">&#34;empName != null and empName !=&#39;&#39;&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>emp_name = #{empName} and
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;if</span> <span style="color:#007f7f">test=</span><span style="color:#0ff;font-weight:bold">&#34;age != null and age !=&#39;&#39;&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>	age = #{age}
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/if&gt;</span>
</span></span></code></pre></div></li>
</ul>
<h3 id="83-trim">8.3 trim<a hidden class="anchor" aria-hidden="true" href="#83-trim">#</a></h3>
<ul>
<li>
<p>trim用于去掉或添加标签中的内容</p>
</li>
<li>
<p>解决后面带有<code>and </code> 或者 <code>or</code></p>
</li>
<li>
<p>常用属性</p>
</li>
<li>
<p>prefix：在trim标签中的内容的前面添加某些内容</p>
<ul>
<li>suffix：在trim标签中的内容的后面添加某些内容</li>
<li>prefixOverrides：在trim标签中的内容的前面去掉某些内容</li>
<li>suffixOverrides：在trim标签中的内容的后面去掉某些内容</li>
</ul>
</li>
<li>
<p>若trim中的标签都不满足条件，则trim标签没有任何效果，也就是只剩下<code>select * from t_emp</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--List&lt;Emp&gt; getEmpByCondition(Emp emp);--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;getEmpByCondition&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;Emp&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>	select * from t_emp
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;trim</span> <span style="color:#007f7f">prefix=</span><span style="color:#0ff;font-weight:bold">&#34;where&#34;</span> <span style="color:#007f7f">suffixOverrides=</span><span style="color:#0ff;font-weight:bold">&#34;and|or&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;if</span> <span style="color:#007f7f">test=</span><span style="color:#0ff;font-weight:bold">&#34;empName != null and empName !=&#39;&#39;&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>			emp_name = #{empName} and
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;if</span> <span style="color:#007f7f">test=</span><span style="color:#0ff;font-weight:bold">&#34;age != null and age !=&#39;&#39;&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>			age = #{age} and
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;if</span> <span style="color:#007f7f">test=</span><span style="color:#0ff;font-weight:bold">&#34;sex != null and sex !=&#39;&#39;&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>			sex = #{sex} or
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;if</span> <span style="color:#007f7f">test=</span><span style="color:#0ff;font-weight:bold">&#34;email != null and email !=&#39;&#39;&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>			email = #{email}
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;/trim&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></div></li>
</ul>
<h3 id="84-choosewhenotherwise">8.4 choose、when、otherwise<a hidden class="anchor" aria-hidden="true" href="#84-choosewhenotherwise">#</a></h3>
<ul>
<li>
<p><code>choose、when、otherwise</code>相当于<code>if...else if..else</code></p>
</li>
<li>
<p>when至少要有一个，otherwise至多只有一个</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;getEmpByChoose&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;Emp&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>	select * from t_emp
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;where&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;choose&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;when</span> <span style="color:#007f7f">test=</span><span style="color:#0ff;font-weight:bold">&#34;empName != null and empName != &#39;&#39;&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>				emp_name = #{empName}
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;/when&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;when</span> <span style="color:#007f7f">test=</span><span style="color:#0ff;font-weight:bold">&#34;age != null and age != &#39;&#39;&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>				age = #{age}
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;/when&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;when</span> <span style="color:#007f7f">test=</span><span style="color:#0ff;font-weight:bold">&#34;sex != null and sex != &#39;&#39;&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>				sex = #{sex}
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;/when&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;when</span> <span style="color:#007f7f">test=</span><span style="color:#0ff;font-weight:bold">&#34;email != null and email != &#39;&#39;&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>				email = #{email}
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;/when&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;otherwise&gt;</span>
</span></span><span style="display:flex;"><span>				did = 1
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;/otherwise&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;/choose&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;/where&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></div></li>
</ul>
<h3 id="85-foreach">8.5 foreach<a hidden class="anchor" aria-hidden="true" href="#85-foreach">#</a></h3>
<ul>
<li>
<p>属性：</p>
</li>
<li>
<p>collection：设置要循环的数组或集合</p>
<ul>
<li>item：表示集合或数组中的每一个数据</li>
<li>separator：设置循环体之间的分隔符，分隔符前后默认有一个空格，如<code>,</code></li>
<li>open：设置foreach标签中的内容的开始符</li>
<li>close：设置foreach标签中的内容的结束符</li>
</ul>
</li>
<li>
<p>批量删除</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--int deleteMoreByArray(Integer[] eids);
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">int result = mapper.deleteMoreByArray(new Integer[]{6, 7, 8, 9});
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;delete</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;deleteMoreByArray&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>	delete from t_emp where eid in
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;foreach</span> <span style="color:#007f7f">collection=</span><span style="color:#0ff;font-weight:bold">&#34;eids&#34;</span> <span style="color:#007f7f">item=</span><span style="color:#0ff;font-weight:bold">&#34;eid&#34;</span> <span style="color:#007f7f">separator=</span><span style="color:#0ff;font-weight:bold">&#34;,&#34;</span> <span style="color:#007f7f">open=</span><span style="color:#0ff;font-weight:bold">&#34;(&#34;</span> <span style="color:#007f7f">close=</span><span style="color:#0ff;font-weight:bold">&#34;)&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>		#{eid}
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;/foreach&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/delete&gt;</span>
</span></span></code></pre></div></li>
<li>
<p>批量添加</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--int insertMoreByList(@Param(&#34;emps&#34;) List&lt;Emp&gt; emps);
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">List&lt;Emp&gt; emps = Arrays.asList(emp1, emp2, emp3);
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">	int result = mapper.insertMoreByList(emps);
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;insert</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;insertMoreByList&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>	insert into t_emp values
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;foreach</span> <span style="color:#007f7f">collection=</span><span style="color:#0ff;font-weight:bold">&#34;emps&#34;</span> <span style="color:#007f7f">item=</span><span style="color:#0ff;font-weight:bold">&#34;emp&#34;</span> <span style="color:#007f7f">separator=</span><span style="color:#0ff;font-weight:bold">&#34;,&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>		(null,#{emp.empName},#{emp.age},#{emp.sex},#{emp.email},null)
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;/foreach&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/insert&gt;</span>
</span></span></code></pre></div></li>
</ul>
<h3 id="86-sql-片段">8.6 sql 片段<a hidden class="anchor" aria-hidden="true" href="#86-sql-片段">#</a></h3>
<ul>
<li>sql片段，可以记录一段公共sql片段，在使用的地方通过include标签进行引入</li>
</ul>
<ul>
<li>声明sql片段：<code>&lt;sql&gt;</code>标签</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;sql</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;empColumns&#34;</span><span style="font-weight:bold">&gt;</span>eid,emp_name,age,sex,email<span style="font-weight:bold">&lt;/sql&gt;</span>
</span></span></code></pre></div><ul>
<li>引用sql片段：<code>&lt;include&gt;</code>标签</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--List&lt;Emp&gt; getEmpByCondition(Emp emp);--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;select</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;getEmpByCondition&#34;</span> <span style="color:#007f7f">resultType=</span><span style="color:#0ff;font-weight:bold">&#34;Emp&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>	select <span style="font-weight:bold">&lt;include</span> <span style="color:#007f7f">refid=</span><span style="color:#0ff;font-weight:bold">&#34;empColumns&#34;</span><span style="font-weight:bold">&gt;&lt;/include&gt;</span> from t_emp
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/select&gt;</span>
</span></span></code></pre></div><h2 id="9-mybatis的逆向工程">9 MyBatis的逆向工程<a hidden class="anchor" aria-hidden="true" href="#9-mybatis的逆向工程">#</a></h2>
<ul>
<li>
<p>正向工程：先创建Java实体类，由框架负责根据实体类生成数据库表。Hibernate是支持正向工程的</p>
</li>
<li>
<p>逆向工程：先创建数据库表，由框架负责根据数据库表，反向生成如下资源：</p>
</li>
<li>
<p>Java实体类</p>
<ul>
<li>Mapper接口</li>
<li>Mapper映射文件</li>
</ul>
</li>
<li>
<p>添加依赖</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;dependencies&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">&lt;!-- MyBatis核心依赖包 --&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;groupId&gt;</span>org.mybatis<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;artifactId&gt;</span>mybatis<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;version&gt;</span>3.5.9<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">&lt;!-- junit测试 --&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;groupId&gt;</span>junit<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;artifactId&gt;</span>junit<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;version&gt;</span>4.13.2<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;scope&gt;</span>test<span style="font-weight:bold">&lt;/scope&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">&lt;!-- MySQL驱动 --&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;groupId&gt;</span>mysql<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;artifactId&gt;</span>mysql-connector-java<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;version&gt;</span>8.0.27<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">&lt;!-- log4j日志 --&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;groupId&gt;</span>log4j<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;artifactId&gt;</span>log4j<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;version&gt;</span>1.2.17<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/dependencies&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">&lt;!-- 控制Maven在构建过程中相关配置 --&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;build&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">&lt;!-- 构建过程中用到的插件 --&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;plugins&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#007f7f">&lt;!-- 具体插件，逆向工程的操作是以构建过程中插件形式出现的 --&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;plugin&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;groupId&gt;</span>org.mybatis.generator<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;artifactId&gt;</span>mybatis-generator-maven-plugin<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;version&gt;</span>1.3.0<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="color:#007f7f">&lt;!-- 插件的依赖 --&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;dependencies&gt;</span>
</span></span><span style="display:flex;"><span>				<span style="color:#007f7f">&lt;!-- 逆向工程的核心依赖 --&gt;</span>
</span></span><span style="display:flex;"><span>				<span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>					<span style="font-weight:bold">&lt;groupId&gt;</span>org.mybatis.generator<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>					<span style="font-weight:bold">&lt;artifactId&gt;</span>mybatis-generator-core<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>					<span style="font-weight:bold">&lt;version&gt;</span>1.3.2<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>				<span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>				<span style="color:#007f7f">&lt;!-- 数据库连接池 --&gt;</span>
</span></span><span style="display:flex;"><span>				<span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>					<span style="font-weight:bold">&lt;groupId&gt;</span>com.mchange<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>					<span style="font-weight:bold">&lt;artifactId&gt;</span>c3p0<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>					<span style="font-weight:bold">&lt;version&gt;</span>0.9.2<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>				<span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>				<span style="color:#007f7f">&lt;!-- MySQL驱动 --&gt;</span>
</span></span><span style="display:flex;"><span>				<span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>					<span style="font-weight:bold">&lt;groupId&gt;</span>mysql<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>					<span style="font-weight:bold">&lt;artifactId&gt;</span>mysql-connector-java<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>					<span style="font-weight:bold">&lt;version&gt;</span>8.0.27<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>				<span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;/dependencies&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;/plugin&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;/plugins&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/build&gt;</span>
</span></span></code></pre></div></li>
<li>
<p>创建逆向工程的配置文件</p>
<ul>
<li>文件名必须是：<code>generatorConfig.xml</code>
<ul>
<li>这里是<code>mac</code>下的路径，<code>windows</code>需要额外修改</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;!DOCTYPE generatorConfiguration
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        PUBLIC &#34;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">        &#34;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;generatorConfiguration&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">    targetRuntime: 执行生成的逆向工程的版本
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">            MyBatis3Simple: 生成基本的CRUD（清新简洁版）
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">            MyBatis3: 生成带条件的CRUD（奢华尊享版）
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">    --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;context</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;DB2Tables&#34;</span> <span style="color:#007f7f">targetRuntime=</span><span style="color:#0ff;font-weight:bold">&#34;MyBatis3&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!-- 数据库的连接信息 --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;jdbcConnection</span> <span style="color:#007f7f">driverClass=</span><span style="color:#0ff;font-weight:bold">&#34;com.mysql.cj.jdbc.Driver&#34;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#007f7f">connectionURL=</span><span style="color:#0ff;font-weight:bold">&#34;jdbc:mysql://localhost:3306/mybatis?characterEncoding=utf8&amp;amp;useSSL=false&amp;amp;serverTimezone=UTC&amp;amp;rewriteBatchedStatements=true&#34;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#007f7f">userId=</span><span style="color:#0ff;font-weight:bold">&#34;root&#34;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#007f7f">password=</span><span style="color:#0ff;font-weight:bold">&#34;root&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/jdbcConnection&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!-- javaBean的生成策略--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;javaModelGenerator</span> <span style="color:#007f7f">targetPackage=</span><span style="color:#0ff;font-weight:bold">&#34;com.reus.mybatis.pojo&#34;</span> <span style="color:#007f7f">targetProject=</span><span style="color:#0ff;font-weight:bold">&#34;./src/main/java&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;enableSubPackages&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;true&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;trimStrings&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;true&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/javaModelGenerator&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!-- SQL映射文件的生成策略 --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;sqlMapGenerator</span> <span style="color:#007f7f">targetPackage=</span><span style="color:#0ff;font-weight:bold">&#34;com.reus.mybatis.mapper&#34;</span>
</span></span><span style="display:flex;"><span>                         <span style="color:#007f7f">targetProject=</span><span style="color:#0ff;font-weight:bold">&#34;./src/main/resources&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;enableSubPackages&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;true&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/sqlMapGenerator&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!-- Mapper接口的生成策略 --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;javaClientGenerator</span> <span style="color:#007f7f">type=</span><span style="color:#0ff;font-weight:bold">&#34;XMLMAPPER&#34;</span>
</span></span><span style="display:flex;"><span>                             <span style="color:#007f7f">targetPackage=</span><span style="color:#0ff;font-weight:bold">&#34;com.reus.mybatis.mapper&#34;</span> <span style="color:#007f7f">targetProject=</span><span style="color:#0ff;font-weight:bold">&#34;./src/main/java&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;enableSubPackages&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;true&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/javaClientGenerator&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!-- 逆向分析的表 --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!-- tableName设置为*号，可以对应所有表，此时不写domainObjectName --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!-- domainObjectName属性指定生成出来的实体类的类名 --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;table</span> <span style="color:#007f7f">tableName=</span><span style="color:#0ff;font-weight:bold">&#34;t_emp&#34;</span> <span style="color:#007f7f">domainObjectName=</span><span style="color:#0ff;font-weight:bold">&#34;Emp&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;table</span> <span style="color:#007f7f">tableName=</span><span style="color:#0ff;font-weight:bold">&#34;t_dept&#34;</span> <span style="color:#007f7f">domainObjectName=</span><span style="color:#0ff;font-weight:bold">&#34;Dept&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/context&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/generatorConfiguration&gt;</span>
</span></span></code></pre></div></li>
<li>
<p><img loading="lazy" src="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/image-20220429115201504.png" alt="image-20220429115201504"  />
</p>
</li>
<li>
<p>运行结果</p>
<ul>
<li><img loading="lazy" src="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/image-20220429115323104.png" alt="image-20220429115323104"  />
</li>
</ul>
</li>
</ul>
<h2 id="10-配置分页插件">10 配置分页插件<a hidden class="anchor" aria-hidden="true" href="#10-配置分页插件">#</a></h2>
<ul>
<li>
<p><code>pom.xml</code>添加依赖</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#007f7f">&lt;!-- https://mvnrepository.com/artifact/com.github.pagehelper/pagehelper --&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;groupId&gt;</span>com.github.pagehelper<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;artifactId&gt;</span>pagehelper<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;version&gt;</span>5.2.0<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span></code></pre></div></li>
<li>
<p>在MyBatis的核心配置文件（mybatis-config.xml）中配置插件</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;plugins&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!--设置分页插件--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;plugin</span> <span style="color:#007f7f">interceptor=</span><span style="color:#0ff;font-weight:bold">&#34;com.github.pagehelper.PageInterceptor&#34;</span><span style="font-weight:bold">&gt;&lt;/plugin&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/plugins&gt;</span>
</span></span></code></pre></div></li>
<li>
<p>使用</p>
<ul>
<li>在查询功能之前使用<code>PageHelper.startPage(int pageNum, int pageSize)</code>开启分页功能</li>
<li>pageNum：当前页的页码
<ul>
<li>pageSize：每页显示的条数</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>EmpMapper mapper = sqlSession.<span style="color:#007f7f">getMapper</span>(EmpMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//访问第一页，每页四条数据
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>PageHelper.<span style="color:#007f7f">startPage</span>(1,4);
</span></span><span style="display:flex;"><span>	List&lt;Emp&gt; emps = mapper.<span style="color:#007f7f">selectByExample</span>(<span style="color:#fff;font-weight:bold">null</span>);
</span></span><span style="display:flex;"><span>	emps.<span style="color:#007f7f">forEach</span>(System.<span style="color:#007f7f">out</span>::println);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li><img loading="lazy" src="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/image-20220429115614995.png" alt="image-20220429115614995"  />
</li>
</ul>
</li>
<li>
<p>在查询获取list集合之后，使用<code>PageInfo&lt;T&gt; pageInfo = new PageInfo&lt;&gt;(List&lt;T&gt; list, intnavigatePages)</code>获取分页相关数据</p>
<ul>
<li>list：分页之后的数据
<ul>
<li>navigatePages：导航分页的页码数</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Test
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">void</span> testPageHelper() <span style="color:#fff;font-weight:bold">throws</span> IOException {
</span></span><span style="display:flex;"><span>	InputStream is = Resources.<span style="color:#007f7f">getResourceAsStream</span>(<span style="color:#0ff;font-weight:bold">&#34;mybatis-config.xml&#34;</span>);
</span></span><span style="display:flex;"><span>	SqlSessionFactoryBuilder sqlSessionFactoryBuilder = <span style="color:#fff;font-weight:bold">new</span> SqlSessionFactoryBuilder();
</span></span><span style="display:flex;"><span>	SqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.<span style="color:#007f7f">build</span>(is);
</span></span><span style="display:flex;"><span>	SqlSession sqlSession = sqlSessionFactory.<span style="color:#007f7f">openSession</span>(<span style="color:#fff;font-weight:bold">true</span>);
</span></span><span style="display:flex;"><span>	EmpMapper mapper = sqlSession.<span style="color:#007f7f">getMapper</span>(EmpMapper.<span style="color:#007f7f">class</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	PageHelper.<span style="color:#007f7f">startPage</span>(1, 4);
</span></span><span style="display:flex;"><span>	List&lt;Emp&gt; emps = mapper.<span style="color:#007f7f">selectByExample</span>(<span style="color:#fff;font-weight:bold">null</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	PageInfo&lt;Emp&gt; page = <span style="color:#fff;font-weight:bold">new</span> PageInfo&lt;&gt;(emps,5);
</span></span><span style="display:flex;"><span>	System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(page);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>
<p>结果：</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#f00">PageInfo</span>{
</span></span><span style="display:flex;"><span><span style="color:#f00">pageNum=1,</span> <span style="color:#f00">pageSize=4,</span> <span style="color:#f00">size=4,</span> <span style="color:#f00">startRow=1,</span> <span style="color:#f00">endRow=4,</span> <span style="color:#f00">total=8,</span> <span style="color:#f00">pages=2,</span> 
</span></span><span style="display:flex;"><span><span style="color:#f00">list=Page{count=true,</span> <span style="color:#f00">pageNum=1,</span> <span style="color:#f00">pageSize=4,</span> <span style="color:#f00">startRow=0,</span> <span style="color:#f00">endRow=4,</span> <span style="color:#f00">total=8,</span> <span style="color:#f00">pages=2,</span> <span style="color:#f00">reasonable=false,</span> <span style="color:#f00">pageSizeZero=false</span>}
</span></span><span style="display:flex;"><span>[<span style="color:#f00">Emp</span>{<span style="color:#f00">eid=1,</span> <span style="color:#f00">empName=&#39;admin&#39;,</span> <span style="color:#f00">age=22,</span> <span style="color:#f00">sex=&#39;男&#39;,</span> <span style="color:#f00">email=&#39;456@qq.com&#39;,</span> <span style="color:#f00">did=3</span>}, <span style="color:#f00">Emp</span>{<span style="color:#f00">eid=2,</span> <span style="color:#f00">empName=&#39;admin2&#39;,</span> <span style="color:#f00">age=22,</span> <span style="color:#f00">sex=&#39;男&#39;,</span> <span style="color:#f00">email=&#39;456@qq.com&#39;,</span> <span style="color:#f00">did=3</span>}, <span style="color:#f00">Emp</span>{<span style="color:#f00">eid=3,</span> <span style="color:#f00">empName=&#39;王五&#39;,</span> <span style="color:#f00">age=12,</span> <span style="color:#f00">sex=&#39;女&#39;,</span> <span style="color:#f00">email=&#39;123@qq.com&#39;,</span> <span style="color:#f00">did=3</span>}, <span style="color:#f00">Emp</span>{<span style="color:#f00">eid=4,</span> <span style="color:#f00">empName=&#39;赵六&#39;,</span> <span style="color:#f00">age=32,</span> <span style="color:#f00">sex=&#39;男&#39;,</span> <span style="color:#f00">email=&#39;123@qq.com&#39;,</span> <span style="color:#f00">did=1</span>}]<span style="color:#f00">,</span> 
</span></span><span style="display:flex;"><span><span style="color:#f00">prePage=</span><span style="color:#ff0;font-weight:bold">0</span><span style="color:#f00">,</span> <span style="color:#f00">nextPage=</span><span style="color:#ff0;font-weight:bold">2</span><span style="color:#f00">,</span> <span style="color:#f00">isFirstPage=</span><span style="color:#fff;font-weight:bold">true</span><span style="color:#f00">,</span> <span style="color:#f00">isLastPage=</span><span style="color:#fff;font-weight:bold">false</span><span style="color:#f00">,</span> <span style="color:#f00">hasPreviousPage=</span><span style="color:#fff;font-weight:bold">false</span><span style="color:#f00">,</span> <span style="color:#f00">hasNextPage=</span><span style="color:#fff;font-weight:bold">true</span><span style="color:#f00">,</span> <span style="color:#f00">navigatePages=</span><span style="color:#ff0;font-weight:bold">5</span><span style="color:#f00">,</span> <span style="color:#f00">navigateFirstPage=</span><span style="color:#ff0;font-weight:bold">1</span><span style="color:#f00">,</span> <span style="color:#f00">navigateLastPage=</span><span style="color:#ff0;font-weight:bold">2</span><span style="color:#f00">,</span> <span style="color:#f00">navigatepageNums=</span>[<span style="color:#ff0;font-weight:bold">1</span>, <span style="color:#ff0;font-weight:bold">2</span>]<span style="color:#f00">}</span>
</span></span></code></pre></div><ul>
<li>常用数据
<ul>
<li>pageNum：当前页的页码</li>
<li>pageSize：每页显示的条数</li>
<li>size：当前页显示的真实条数</li>
<li>total：总记录数</li>
<li>pages：总页数</li>
<li>prePage：上一页的页码</li>
<li>nextPage：下一页的页码</li>
<li>isFirstPage/isLastPage：是否为第一页/最后一页</li>
<li>hasPreviousPage/hasNextPage：是否存在上一页/下一页</li>
<li>navigatePages：导航分页的页码数</li>
<li>navigatepageNums：导航分页的页码，[1,2,3,4,5]</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://www.reus09.top/tags/ssm/">SSM</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="http://www.reus09.top/posts/tech/springboot/">
    <span class="title">« Prev</span>
    <br>
    <span>SpringBoot</span>
  </a>
  <a class="next" href="http://www.reus09.top/posts/tech/spring-mvc/">
    <span class="title">Next »</span>
    <br>
    <span>Spring Mvc</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2022 <a href="http://www.reus09.top">Reus09&#39;s Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
