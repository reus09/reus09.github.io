<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Spring Mvc | Reus09&#39;s Blog</title>
<meta name="keywords" content="SSM">
<meta name="description" content="Spring-mvc 本篇主要对spring-mvc的知识点进行总结 MVC的工作流程： 用户通过视图层发送请求到服务器，在服务器中请求被Controller接收，">
<meta name="author" content="Reus09">
<link rel="canonical" href="http://www.reus09.top/posts/tech/spring-mvc/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.40573d180b208ab15c3bf0a170c2ac86aa8ccf179f96f939352198fbee79100e.css" integrity="sha256-QFc9GAsgirFcO/ChcMKshqqMzxeflvk5NSGY&#43;&#43;55EA4=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/20211103151005.jpeg">
<link rel="icon" type="image/png" sizes="16x16" href="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/20211103151005.jpeg">
<link rel="icon" type="image/png" sizes="32x32" href="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/20211103151005.jpeg">
<link rel="apple-touch-icon" href="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/20211103151005.jpeg">
<link rel="mask-icon" href="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/20211103151005.jpeg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Spring Mvc" />
<meta property="og:description" content="Spring-mvc 本篇主要对spring-mvc的知识点进行总结 MVC的工作流程： 用户通过视图层发送请求到服务器，在服务器中请求被Controller接收，" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://www.reus09.top/posts/tech/spring-mvc/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-04-29T09:16:59+00:00" />
<meta property="article:modified_time" content="2022-09-11T16:12:00+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Spring Mvc"/>
<meta name="twitter:description" content="Spring-mvc 本篇主要对spring-mvc的知识点进行总结 MVC的工作流程： 用户通过视图层发送请求到服务器，在服务器中请求被Controller接收，"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "📚文章",
      "item": "http://www.reus09.top/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "👨🏻‍💻技术",
      "item": "http://www.reus09.top/posts/tech/"
    }, 
    {
      "@type": "ListItem",
      "position":  4 ,
      "name": "Spring Mvc",
      "item": "http://www.reus09.top/posts/tech/spring-mvc/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Spring Mvc",
  "name": "Spring Mvc",
  "description": "Spring-mvc 本篇主要对spring-mvc的知识点进行总结 MVC的工作流程： 用户通过视图层发送请求到服务器，在服务器中请求被Controller接收，",
  "keywords": [
    "SSM"
  ],
  "articleBody": "Spring-mvc 本篇主要对spring-mvc的知识点进行总结\nMVC的工作流程：\n用户通过视图层发送请求到服务器，在服务器中请求被Controller接收，Controller调用相应的Model层处理请求，处理完毕将结果返回到Controller，Controller再根据请求处理的结果找到相应的View视图，渲染数据后最终响应给浏览器 SpringMVC工作流程\n浏览器发送请求，若请求地址符合前端控制器的url-pattern，该请求就会被前端控制器DispatcherServlet处理。 前端控制器会读取SpringMVC的核心配置文件，通过扫描组件找到控制器，将请求地址和控制器中@RequestMapping注解的value属性值进行匹配 若匹配成功，该注解所标识的控制器方法就是处理请求的方法。处理请求的方法需要返回一个字符串类型的视图名称，该视图名称会被视图解析器解析，加上前缀和后缀组成视图的路径，通过Thymeleaf对视图进行渲染，最终转发到视图所对应页面 转发和重定向区别\nforward（转发）：\n是服务器请求资源,服务器直接访问目标地址的URL,把那个URL的响应内容读取过来,然后把这些内容再发给浏览器.浏览器根本不知道服务器发送的内容从哪里来的,因为这个跳转过程实在服务器实现的，并不是在客户端实现的所以客户端并不知道这个跳转动作，所以它的地址栏还是原来的地址.\nredirect（重定向）：\n是服务端根据逻辑,发送一个状态码,告诉浏览器重新去请求那个地址.所以地址栏显示的是新的URL.\n转发是服务器行为，重定向是客户端行为。\n1 配置环境 相关依赖\n1 2 3 4 5 org.springframework spring-webmvc 5.3.1 在web.xml里面配置springMVC的组件，还有过滤器， 对SpringMVC的配置文件:web.xml\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 CharacterEncodingFilter org.springframework.web.filter.CharacterEncodingFilter encoding UTF-8 forceResponseEncoding true CharacterEncodingFilter /* springMVC org.springframework.web.servlet.DispatcherServlet contextConfigLocation classpath:springMVC.xml 1 springMVC / 注：\n标签中使用/和/*的区别：\n/所匹配的请求可以是/login或.html或.js或.css方式的请求路径，但是/不能匹配.jsp请求路径的请求\n因此就可以避免在访问jsp页面时，该请求被DispatcherServlet处理，从而找不到相应的页面\n/*则能够匹配所有请求，例如在使用过滤器时，若需要对所有请求进行过滤，就需要使用/*的写法\nspring-mvc.xml配置文件\n这里是以解析器为thymeleaf 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 \u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e ",
  "wordCount" : "8258",
  "inLanguage": "en",
  "datePublished": "2022-04-29T09:16:59Z",
  "dateModified": "2022-09-11T16:12:00+08:00",
  "author":[{
    "@type": "Person",
    "name": "Reus09"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://www.reus09.top/posts/tech/spring-mvc/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Reus09's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/20211103151005.jpeg"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://www.reus09.top" accesskey="h" title="Reus09&#39;s Blog (Alt + H)">Reus09&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://www.reus09.top/search" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="http://www.reus09.top/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="http://www.reus09.top/posts" title="Posts">
                    <span>Posts</span>
                </a>
            </li>
            <li>
                <a href="http://www.reus09.top/archives/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="http://www.reus09.top/categories" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="http://www.reus09.top/tags" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="http://www.reus09.top/about" title="About">
                    <span>About</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://www.reus09.top">Home</a>&nbsp;»&nbsp;<a href="http://www.reus09.top/posts/">📚文章</a>&nbsp;»&nbsp;<a href="http://www.reus09.top/posts/tech/">👨🏻‍💻技术</a></div>
    <h1 class="post-title">
      Spring Mvc
    </h1>
    <div class="post-meta"><span title='2022-04-29 09:16:59 +0000 UTC'>2022-04-29</span>&nbsp;·&nbsp;17 min&nbsp;·&nbsp;Reus09

</div>
  </header> <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">Table of Contents</span>
            </summary>

            <div class="inner"><ul>
                    <li>
                        <a href="#spring-mvc" aria-label="Spring-mvc">Spring-mvc</a><ul>
                            
                    <li>
                        <a href="#1-%e9%85%8d%e7%bd%ae%e7%8e%af%e5%a2%83" aria-label="1 配置环境">1 配置环境</a></li>
                    <li>
                        <a href="#2-springmvc%e4%b8%ad%e5%b8%b8%e7%94%a8%e7%9a%84%e6%a0%87%e7%ad%be" aria-label="2 SpringMVC中常用的标签">2 <code>SpringMVC</code>中常用的标签</a><ul>
                            
                    <li>
                        <a href="#21-requestingmapping" aria-label="2.1 @RequestingMapping">2.1 <code>@RequestingMapping</code></a></li>
                    <li>
                        <a href="#22-requestparam" aria-label="2.2 @RequestParam">2.2 <code>@RequestParam</code></a></li>
                    <li>
                        <a href="#23-requestheader" aria-label="2.3 @RequestHeader">2.3 <code>@RequestHeader</code></a></li>
                    <li>
                        <a href="#24-cookievalue" aria-label="2.4 @CookieValue">2.4 <code>@CookieValue</code></a></li>
                    <li>
                        <a href="#25requestbody" aria-label="2.5@RequestBody">2.5<code>@RequestBody</code></a></li>
                    <li>
                        <a href="#26responsebody" aria-label="2.6@ResponseBody">2.6<code>@ResponseBody</code></a></li>
                    <li>
                        <a href="#27restcontroller" aria-label="2.7@RestController">2.7<code>@RestController</code></a></li></ul>
                    </li>
                    <li>
                        <a href="#3-spirngmvc%e8%8e%b7%e5%8f%96%e5%8f%82%e6%95%b0" aria-label="3 SpirngMVC获取参数">3 SpirngMVC获取参数</a></li>
                    <li>
                        <a href="#4-%e5%9f%9f%e5%af%b9%e8%b1%a1%e5%85%b1%e4%ba%ab%e6%95%b0%e6%8d%ae" aria-label="4 域对象共享数据">4 域对象共享数据</a><ul>
                            
                    <li>
                        <a href="#41-request%e5%9f%9f" aria-label="4.1 request域">4.1 <code>request</code>域</a></li>
                    <li>
                        <a href="#42-session%e5%9f%9f" aria-label="4.2 session域">4.2 <code>session</code>域</a></li>
                    <li>
                        <a href="#43-application%e5%9f%9f" aria-label="4.3 application域">4.3 <code>application</code>域</a></li></ul>
                    </li>
                    <li>
                        <a href="#5-%e8%a7%86%e5%9b%be" aria-label="5 视图">5 视图</a></li>
                    <li>
                        <a href="#6-restful" aria-label="6 Restful">6 <code>Restful</code></a></li>
                    <li>
                        <a href="#7-%e6%96%87%e4%bb%b6%e4%b8%8a%e4%bc%a0%e4%b8%8b%e8%bd%bd" aria-label="7 文件上传下载">7 文件上传下载</a></li>
                    <li>
                        <a href="#8-%e6%8b%a6%e6%88%aa%e5%99%a8" aria-label="8 拦截器">8 拦截器</a></li>
                    <li>
                        <a href="#9-%e5%bc%82%e5%b8%b8%e5%a4%84%e7%90%86" aria-label="9 异常处理">9 异常处理</a></li>
                    <li>
                        <a href="#10-springmvc%e6%89%a7%e8%a1%8c%e6%b5%81%e7%a8%8b" aria-label="10 SpringMVC执行流程">10 <code>SpringMVC</code>执行流程</a>
                    </li>
                </ul>
                </li>
                </ul>
            </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
         
         activeElement = elements[0];
         const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
         document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
     }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 && 
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
             const id = encodeURI(element.getAttribute('id')).toLowerCase();
             if (element === activeElement){
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
             } else {
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
             }
         })
     }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
</script>

  <div class="post-content"><h1 id="spring-mvc">Spring-mvc<a hidden class="anchor" aria-hidden="true" href="#spring-mvc">#</a></h1>
<ul>
<li>
<p>本篇主要对<code>spring-mvc</code>的知识点进行总结</p>
</li>
<li>
<p>MVC的工作流程：</p>
<ul>
<li>用户通过视图层发送请求到服务器，在服务器中请求被<code>Controller</code>接收，<code>Controller</code>调用相应的<code>Model</code>层处理请求，处理完毕将结果返回到<code>Controller</code>，<code>Controller</code>再根据请求处理的结果找到相应的<code>View</code>视图，渲染数据后最终响应给浏览器</li>
</ul>
</li>
<li>
<p><code>SpringMVC</code>工作流程</p>
<ul>
<li>浏览器发送请求，若请求地址符合前端控制器的url-pattern，该请求就会被前端控制器DispatcherServlet处理。</li>
<li>前端控制器会读取SpringMVC的核心配置文件，通过扫描组件找到控制器，将请求地址和控制器中@RequestMapping注解的value属性值进行匹配
<ul>
<li>若匹配成功，该注解所标识的控制器方法就是处理请求的方法。处理请求的方法需要返回一个字符串类型的视图名称，该视图名称会被视图解析器解析，加上前缀和后缀组成视图的路径，通过Thymeleaf对视图进行渲染，最终转发到视图所对应页面</li>
</ul>
</li>
</ul>
</li>
<li>
<p>转发和重定向区别</p>
<ul>
<li>
<p><strong>forward（转发）</strong>：</p>
<p>是服务器请求资源,服务器直接访问目标地址的URL,把那个URL的响应内容读取过来,然后把这些内容再发给浏览器.浏览器根本不知道服务器发送的内容从哪里来的,因为这个跳转过程实在服务器实现的，并不是在客户端实现的所以客户端并不知道这个跳转动作，所以它的地址栏还是原来的地址.</p>
</li>
<li>
<p><strong>redirect（重定向）</strong>：</p>
<p>是服务端根据逻辑,发送一个状态码,告诉浏览器重新去请求那个地址.所以地址栏显示的是新的URL.</p>
</li>
<li>
<p>转发是服务器行为，重定向是客户端行为。</p>
</li>
</ul>
</li>
</ul>
<h2 id="1-配置环境">1 配置环境<a hidden class="anchor" aria-hidden="true" href="#1-配置环境">#</a></h2>
<ul>
<li>
<p>相关依赖</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;groupId&gt;</span>org.springframework<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;artifactId&gt;</span>spring-webmvc<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;version&gt;</span>5.3.1<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><img loading="lazy" src="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/image-20220429092709662.png" alt="image-20220429092709662"  />
</p>
<ul>
<li>在<code>web.xml</code>里面配置<code>springMVC</code>的组件，还有过滤器，</li>
</ul>
</li>
<li>
<p>对<code>SpringMVC</code>的配置文件:<code>web.xml</code></p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">47
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">48
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--配置springMVC的编码过滤器--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;filter&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;filter-name&gt;</span>CharacterEncodingFilter<span style="font-weight:bold">&lt;/filter-name&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;filter-class&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span style="font-weight:bold">&lt;/filter-class&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;init-param&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;param-name&gt;</span>encoding<span style="font-weight:bold">&lt;/param-name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;param-value&gt;</span>UTF-8<span style="font-weight:bold">&lt;/param-value&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/init-param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;init-param&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;param-name&gt;</span>forceResponseEncoding<span style="font-weight:bold">&lt;/param-name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;param-value&gt;</span>true<span style="font-weight:bold">&lt;/param-value&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/init-param&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/filter&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;filter-mapping&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;filter-name&gt;</span>CharacterEncodingFilter<span style="font-weight:bold">&lt;/filter-name&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;url-pattern&gt;</span>/*<span style="font-weight:bold">&lt;/url-pattern&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/filter-mapping&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">&lt;!-- 配置SpringMVC的前端控制器，对浏览器发送的请求统一进行处理 --&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;servlet&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;servlet-name&gt;</span>springMVC<span style="font-weight:bold">&lt;/servlet-name&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;servlet-class&gt;</span>org.springframework.web.servlet.DispatcherServlet<span style="font-weight:bold">&lt;/servlet-class&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!-- 通过初始化参数指定SpringMVC配置文件的位置和名称 --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;init-param&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!-- contextConfigLocation为固定值 --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;param-name&gt;</span>contextConfigLocation<span style="font-weight:bold">&lt;/param-name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">&lt;!-- 使用classpath:表示从类路径查找配置文件，例如maven工程中的src/main/resources --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;param-value&gt;</span>classpath:springMVC.xml<span style="font-weight:bold">&lt;/param-value&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/init-param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!-- 
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"> 		作为框架的核心组件，在启动过程中有大量的初始化操作要做
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">		而这些操作放在第一次请求时才执行会严重影响访问速度
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">		因此需要通过此标签将启动控制DispatcherServlet的初始化时间提前到服务器启动时
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">	--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;load-on-startup&gt;</span>1<span style="font-weight:bold">&lt;/load-on-startup&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/servlet&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;servlet-mapping&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;servlet-name&gt;</span>springMVC<span style="font-weight:bold">&lt;/servlet-name&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">        设置springMVC的核心控制器所能处理的请求的请求路径
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">        /所匹配的请求可以是/login或.html或.js或.css方式的请求路径
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">        但是/不能匹配.jsp请求路径的请求
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">    --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;url-pattern&gt;</span>/<span style="font-weight:bold">&lt;/url-pattern&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/servlet-mapping&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>注：</p>
<blockquote>
<p>&lt;url-pattern&gt;标签中使用/和/*的区别：</p>
<p>/所匹配的请求可以是/login或.html或.js或.css方式的请求路径，但是/不能匹配.jsp请求路径的请求</p>
<p>因此就可以避免在访问jsp页面时，该请求被DispatcherServlet处理，从而找不到相应的页面</p>
<p>/*则能够匹配所有请求，例如在使用过滤器时，若需要对所有请求进行过滤，就需要使用/*的写法</p>
</blockquote>
</li>
<li>
<p><code>spring-mvc.xml</code>配置文件</p>
<ul>
<li>这里是以解析器为<code>thymeleaf</code></li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">35
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">36
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">37
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">38
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">39
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">40
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">41
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">42
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">43
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">44
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">45
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">46
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">47
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">48
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">49
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">50
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">51
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">52
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">53
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">54
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">55
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">56
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">57
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">58
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">59
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">60
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">61
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">62
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">63
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">64
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">65
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">66
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">67
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">68
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">69
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;beans</span> <span style="color:#007f7f">xmlns=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">xmlns:xsi=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">xmlns:context=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/context&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">xmlns:mvc=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/mvc&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#007f7f">xsi:schemaLocation=</span><span style="color:#0ff;font-weight:bold">&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc https://www.springframework.org/schema/mvc/spring-mvc.xsd&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!-- 扫描组件--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;context:component-scan</span> <span style="color:#007f7f">base-package=</span><span style="color:#0ff;font-weight:bold">&#34;com.reus.springmvc&#34;</span><span style="font-weight:bold">&gt;&lt;/context:component-scan&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!-- 配置Thymeleaf视图解析器 --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;viewResolver&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;org.thymeleaf.spring5.view.ThymeleafViewResolver&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;order&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;1&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;characterEncoding&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;UTF-8&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;templateEngine&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;org.thymeleaf.spring5.SpringTemplateEngine&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;templateResolver&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;org.thymeleaf.spring5.templateresolver.SpringResourceTemplateResolver&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#007f7f">&lt;!-- 视图前缀 --&gt;</span>
</span></span><span style="display:flex;"><span>                        <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;prefix&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;/WEB-INF/templates/&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#007f7f">&lt;!-- 视图后缀 --&gt;</span>
</span></span><span style="display:flex;"><span>                        <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;suffix&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;.html&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                        <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;templateMode&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;HTML5&#34;</span><span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                        <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;characterEncoding&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;UTF-8&#34;</span> <span style="font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--  配置视图控制器 --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;mvc:view-controller</span> <span style="color:#007f7f">path=</span><span style="color:#0ff;font-weight:bold">&#34;/&#34;</span> <span style="color:#007f7f">view-name=</span> <span style="color:#0ff;font-weight:bold">&#34;index&#34;</span>  <span style="font-weight:bold">&gt;&lt;/mvc:view-controller&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!-- 开放对静态资源的访问--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;mvc:default-servlet-handler/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!-- 开启 SpringMVC 的 注解驱动  比如RequestMapping --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;mvc:annotation-driven/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!-- 配置 文件上传解析器 ，将上传的文件封装为MultipartFile--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span> <span style="color:#0ff;font-weight:bold">&#34;multipartResolver&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;org.springframework.web.multipart.commons.CommonsMultipartResolver&#34;</span><span style="font-weight:bold">&gt;&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!-- 配置拦截器 --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;mvc:interceptors&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--        &lt;bean class=&#34;com.reus.springmvc.interceptors.FirstInterceptor&#34;&gt;&lt;/bean&gt;--&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--        &lt;mvc:interceptor&gt;--&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--            &lt;mvc:mapping path=&#34;/*&#34;/&gt;--&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--            &lt;mvc:exclude-mapping path=&#34;/&#34;/&gt;--&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--            &lt;ref bean=&#34;firstInterceptor&#34;&gt;&lt;/ref&gt;--&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--        &lt;/mvc:interceptor&gt;--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;ref</span> <span style="color:#007f7f">bean=</span><span style="color:#0ff;font-weight:bold">&#34;firstInterceptor&#34;</span><span style="font-weight:bold">&gt;&lt;/ref&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;ref</span> <span style="color:#007f7f">bean=</span><span style="color:#0ff;font-weight:bold">&#34;secondInterceptor&#34;</span><span style="font-weight:bold">&gt;&lt;/ref&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/mvc:interceptors&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">&lt;!--   配置 异常处理 --&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;org.springframework.web.servlet.handler.SimpleMappingExceptionResolver&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;exceptionMappings&#34;</span><span style="font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;props&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">&lt;prop</span> <span style="color:#007f7f">key=</span><span style="color:#0ff;font-weight:bold">&#34;java.lang.ArithmeticException&#34;</span><span style="font-weight:bold">&gt;</span>error<span style="font-weight:bold">&lt;/prop&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">&lt;/props&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--        设置将异常信息共享在请求域中--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">&lt;property</span> <span style="color:#007f7f">name=</span><span style="color:#0ff;font-weight:bold">&#34;exceptionAttribute&#34;</span> <span style="color:#007f7f">value=</span><span style="color:#0ff;font-weight:bold">&#34;ex&#34;</span><span style="font-weight:bold">&gt;&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h2 id="2-springmvc中常用的标签">2 <code>SpringMVC</code>中常用的标签<a hidden class="anchor" aria-hidden="true" href="#2-springmvc中常用的标签">#</a></h2>
<h3 id="21-requestingmapping">2.1 <code>@RequestingMapping</code><a hidden class="anchor" aria-hidden="true" href="#21-requestingmapping">#</a></h3>
<ul>
<li>
<p><code>RequestingMapping</code></p>
<ul>
<li>
<p>@RequestMapping注解的作用就是将请求和处理请求的控制器方法关联起来，建立映射关系。</p>
<ul>
<li>@RequestMapping注解的value属性是一个字符串类型的数组，表示该请求映射能够匹配多个请求地址所对应的请求</li>
</ul>
</li>
<li>
<p>这个进入可以用在<code>SpringMVC.xml</code>里面用配置的方式代替。</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;mvc:view-controller</span> <span style="color:#007f7f">path=</span><span style="color:#0ff;font-weight:bold">&#34;/&#34;</span> <span style="color:#007f7f">view-name=</span> <span style="color:#0ff;font-weight:bold">&#34;index&#34;</span>  <span style="font-weight:bold">&gt;&lt;/mvc:view-controller&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>但是开启这个会导致其他标注的请求映射失效，因此需要开启mvc注解驱动
<ul>
<li><code>&lt;mvc:annotation-driven /&gt;</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p><code>@RequestMapping</code>标识一个类：设置映射请求的请求路径的初始信息</p>
<p><code>@RequestMapping</code>标识一个方法：设置映射请求请求路径的具体信息</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@Controller
</span></span><span style="display:flex;"><span>@RequestMapping(<span style="color:#0ff;font-weight:bold">&#34;/test&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> RequestMappingController {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#007f7f">//此时请求映射所映射的请求的请求路径为：/test/testRequestMapping
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    @RequestMapping(<span style="color:#0ff;font-weight:bold">&#34;/testRequestMapping&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> String testRequestMapping(){
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#0ff;font-weight:bold">&#34;success&#34;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><code>@RequestMapping</code>注解的<code>method</code>属性通过请求的请求方式（<code>get</code>或<code>post</code>）匹配请求映射</p>
<p><code>@RequestMapping</code>注解的<code>method</code>属性是一个<code>RequestMethod</code>类型的数组，表示该请求映射能够匹配多种请求方式的请求</p>
<p>若当前请求的请求地址满足请求映射的<code>value</code>属性，但是请求方式不满足<code>method</code>属性，则浏览器报错405：<code>Request method 'POST' not supported</code></p>
</li>
<li>
<p><code>@RequestMapping</code>注解的params属性通过请求的请求参数匹配请求映射</p>
</li>
<li>
<p><code>@RequestMapping</code>注解的<code>params</code>属性是一个字符串类型的数组，可以通过四种表达式设置请求参数和请求映射的匹配关系</p>
<ul>
<li><code>&quot;param&quot;</code>：要求请求映射所匹配的请求必须携带<code>param</code>请求参数</li>
<li><code>&quot;!param&quot;</code>：要求请求映射所匹配的请求必须不能携带<code>param</code>请求参数</li>
<li><code>&quot;param=value&quot;</code>：要求请求映射所匹配的请求必须携带<code>param</code>请求参数且<code>param=value</code></li>
<li><code>&quot;param!=value&quot;</code>：要求请求映射所匹配的请求必须携带<code>param</code>请求参数但是<code>param!=value</code></li>
</ul>
</li>
<li>
<p>SpringMVC支持ant风格的路径</p>
<ul>
<li>
<p><code>？</code>：表示任意的单个字符</p>
</li>
<li>
<p><code>*</code>：表示任意的0个或多个字符</p>
</li>
<li>
<p><code>**</code>：表示任意的一层或多层目录</p>
<ul>
<li>只能使用<code>/**/xxx</code>的方式</li>
</ul>
</li>
</ul>
</li>
<li>
<p><code>RequestMapping</code>占位符的作用</p>
<ul>
<li>
<p>SpringMVC路径中的占位符常用于<code>RESTful</code>风格中，当请求路径中将某些数据通过路径的方式传输到服务器中，就可以在相应的<code>@RequestMapping</code>注解的<code>value</code>属性中通过占位符<code>{xxx}</code>表示传输的数据，在通过<code>@PathVariable</code>注解，将占位符所表示的数据赋值给控制器方法的形参</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@RequestMapping(<span style="color:#0ff;font-weight:bold">&#34;/testRest/{id}/{username}&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> String testRest(@PathVariable(<span style="color:#0ff;font-weight:bold">&#34;id&#34;</span>) String id, @PathVariable(<span style="color:#0ff;font-weight:bold">&#34;username&#34;</span>) String username){
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;id:&#34;</span>+id+<span style="color:#0ff;font-weight:bold">&#34;,username:&#34;</span>+username);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> <span style="color:#0ff;font-weight:bold">&#34;success&#34;</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//最终输出的内容为--&gt;id:1,username:admin
</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="22-requestparam">2.2 <code>@RequestParam</code><a hidden class="anchor" aria-hidden="true" href="#22-requestparam">#</a></h3>
<ul>
<li><code>@RequestParam</code>是将请求参数和控制器方法的形参创建映射关系</li>
<li><code>@RequestParam</code>注解一共有三个属性：
<ul>
<li><code>value</code>：指定为形参赋值的请求参数的参数名</li>
<li><code>required</code>：设置是否必须传输此请求参数，默认值为<code>true</code>
<ul>
<li>若设置为<code>true</code>时，则当前请求必须传输<code>value</code>所指定的请求参数，若没有传输该请求参数，且没有设置defaultValue属性，则页面报错<code>400：Required String parameter 'xxx' is not present</code>；若设置为false，则当前请求不是必须传输value所指定的请求参数，若没有传输，则注解所标识的形参的值为null</li>
</ul>
</li>
<li><code>defaultValue</code>：不管<code>required</code>属性值为true或false，当value所指定的请求参数没有传输或传输的值为&quot;&ldquo;时，则使用默认值为形参赋值</li>
</ul>
</li>
<li>作用实际就是指定需要传入的参数并获取。</li>
</ul>
<h3 id="23-requestheader">2.3 <code>@RequestHeader</code><a hidden class="anchor" aria-hidden="true" href="#23-requestheader">#</a></h3>
<ul>
<li>@RequestHeader是将请求头信息和控制器方法的形参创建映射关系</li>
<li>@RequestHeader注解一共有三个属性：<code>value</code>、<code>required</code>、<code>defaultValue</code>，用法同<code>@RequestParam</code></li>
<li>获取请求头的信息</li>
</ul>
<h3 id="24-cookievalue">2.4 <code>@CookieValue</code><a hidden class="anchor" aria-hidden="true" href="#24-cookievalue">#</a></h3>
<ul>
<li>@CookieValue是将cookie数据和控制器方法的形参创建映射关系</li>
<li>@CookieValue注解一共有三个属性：value、required、defaultValue，用法同@RequestParam</li>
<li>作用为获取<code>cookie</code>的信息。</li>
</ul>
<h3 id="25requestbody">2.5<code>@RequestBody</code><a hidden class="anchor" aria-hidden="true" href="#25requestbody">#</a></h3>
<ul>
<li>
<p><code>@RequestBody</code>可以获取请求体，需要在控制器方法设置一个形参，使用<code>@RequestBody</code>进行标识，当前请求的请求体就会为当前注解所标识的形参赋值</p>
<ul>
<li>即获取传输过来的请求体部分</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// 比如传输的 username=admin password=123456
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>@RequestMapping(<span style="color:#0ff;font-weight:bold">&#34;/testRequestBody&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> String testRequestBody(@RequestBody String requestBody){
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;requestBody:&#34;</span>+requestBody);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> <span style="color:#0ff;font-weight:bold">&#34;success&#34;</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>则输出结果为：<code>requestBody:username=admin&amp;password=123456</code></li>
</ul>
</li>
<li>
<p><code>RequestEntity</code>封装请求报文的一种类型，需要在控制器方法的形参中设置该类型的形参，当前请求的请求报文就会赋值给该形参，可以通过<code>getHeaders()</code>获取请求头信息，通过<code>getBody()</code>获取请求体信息</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#f00">requestHeader:</span>[<span style="color:#f00">host:</span><span style="color:#0ff;font-weight:bold">&#34;localhost:8080&#34;</span>, <span style="color:#f00">connection:</span><span style="color:#0ff;font-weight:bold">&#34;keep-alive&#34;</span>, <span style="color:#f00">content-length:</span><span style="color:#0ff;font-weight:bold">&#34;27&#34;</span>, <span style="color:#f00">cache-control:</span><span style="color:#0ff;font-weight:bold">&#34;max-age=0&#34;</span>, <span style="color:#f00">sec-ch-ua:</span><span style="color:#0ff;font-weight:bold">&#34;&#34;</span> <span style="color:#f00">Not</span> <span style="color:#f00">A;Brand</span><span style="color:#0ff;font-weight:bold">&#34;;v=&#34;</span><span style="color:#ff0;font-weight:bold">99</span><span style="color:#0ff;font-weight:bold">&#34;, &#34;</span><span style="color:#f00">Chromium</span><span style="color:#0ff;font-weight:bold">&#34;;v=&#34;</span><span style="color:#ff0;font-weight:bold">90</span><span style="color:#0ff;font-weight:bold">&#34;, &#34;</span><span style="color:#f00">Google</span> <span style="color:#f00">Chrome</span><span style="color:#0ff;font-weight:bold">&#34;;v=&#34;</span><span style="color:#ff0;font-weight:bold">90</span><span style="color:#0ff;font-weight:bold">&#34;&#34;</span>, <span style="color:#f00">sec-ch-ua-mobile:</span><span style="color:#0ff;font-weight:bold">&#34;?0&#34;</span>, <span style="color:#f00">upgrade-insecure-requests:</span><span style="color:#0ff;font-weight:bold">&#34;1&#34;</span>, <span style="color:#f00">origin:</span><span style="color:#0ff;font-weight:bold">&#34;http://localhost:8080&#34;</span>, <span style="color:#f00">user-agent:</span><span style="color:#0ff;font-weight:bold">&#34;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.93 Safari/537.36&#34;</span>]
</span></span><span style="display:flex;"><span><span style="color:#f00">requestBody:username=admin&amp;password=</span><span style="color:#ff0;font-weight:bold">123</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h3 id="26responsebody">2.6<code>@ResponseBody</code><a hidden class="anchor" aria-hidden="true" href="#26responsebody">#</a></h3>
<ul>
<li>
<p>@ResponseBody用于标识一个控制器方法，可以将该方法的返回值直接作为响应报文的响应体响应到浏览器</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@RequestMapping(<span style="color:#0ff;font-weight:bold">&#34;/testResponseBody&#34;</span>)
</span></span><span style="display:flex;"><span>@ResponseBody
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> String testResponseBody(){
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> <span style="color:#0ff;font-weight:bold">&#34;success&#34;</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>结果：浏览器页面显示字符串<code>success</code></li>
</ul>
</li>
</ul>
<h3 id="27restcontroller">2.7<code>@RestController</code><a hidden class="anchor" aria-hidden="true" href="#27restcontroller">#</a></h3>
<ul>
<li><code>@RestController</code>注解是springMVC提供的一个复合注解，标识在控制器的类上，就相当于为类添加了<code>@Controller</code>注解，并且为其中的每个方法添加了<code>@ResponseBody</code>注解</li>
</ul>
<h2 id="3-spirngmvc获取参数">3 SpirngMVC获取参数<a hidden class="anchor" aria-hidden="true" href="#3-spirngmvc获取参数">#</a></h2>
<ul>
<li>
<p><code>ServletAPI获取</code>:<code>request.getParameter(&quot;xx&quot;);</code></p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@RequestMapping(<span style="color:#0ff;font-weight:bold">&#34;/testParam&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> String testParam(HttpServletRequest request){
</span></span><span style="display:flex;"><span>    String username = request.<span style="color:#007f7f">getParameter</span>(<span style="color:#0ff;font-weight:bold">&#34;username&#34;</span>);
</span></span><span style="display:flex;"><span>    String password = request.<span style="color:#007f7f">getParameter</span>(<span style="color:#0ff;font-weight:bold">&#34;password&#34;</span>);
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;username:&#34;</span>+username+<span style="color:#0ff;font-weight:bold">&#34;,password:&#34;</span>+password);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> <span style="color:#0ff;font-weight:bold">&#34;success&#34;</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>通过控制器方法的形参获取请求参数</p>
<ul>
<li>
<p>在控制器方法的形参位置，设置和请求参数同名的形参，当浏览器发送请求，匹配到请求映射时，在DispatcherServlet中就会将请求参数赋值给相应的形参</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="font-weight:bold">a</span> <span style="color:#007f7f">th:href</span>=<span style="color:#0ff;font-weight:bold">&#34;@{/testParam(username=&#39;admin&#39;,password=123456)}&#34;</span>&gt;测试获取请求参数--&gt;/testParam&lt;/<span style="font-weight:bold">a</span>&gt;&lt;<span style="font-weight:bold">br</span>&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@RequestMapping(<span style="color:#0ff;font-weight:bold">&#34;/testParam&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> String testParam(String username, String password){
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;username:&#34;</span>+username+<span style="color:#0ff;font-weight:bold">&#34;,password:&#34;</span>+password);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> <span style="color:#0ff;font-weight:bold">&#34;success&#34;</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>如果同名的参数过多，可以将其设置为数组，这样数组内的每一个元素均为数据，如果不设置数组，则字符将传入的数据用<code>,</code>进行分隔</p>
</li>
</ul>
</li>
<li>
<p>通过<code>POJO</code>获取请求参数</p>
<ul>
<li>
<p>在控制器方法的形参位置设置一个实体类类型的形参，此时若浏览器传输的请求参数的参数名和实体类中的属性名一致，那么请求参数就会为此属性赋值</p>
<ul>
<li>类<code>User</code>中的属性名对应提交的数据</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@RequestMapping(<span style="color:#0ff;font-weight:bold">&#34;/testpojo&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> String testPOJO(User user){
</span></span><span style="display:flex;"><span>    System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(user);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> <span style="color:#0ff;font-weight:bold">&#34;success&#34;</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//最终结果--&gt;User{id=null, username=&#39;张三&#39;, password=&#39;123&#39;, age=23, sex=&#39;男&#39;, email=&#39;123@qq.com&#39;}
</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
</li>
<li>
<p>解决乱码问题</p>
<ul>
<li>可以在<code>web.xml</code>里面注册编码过滤器<code>CharacterEncodingFilter</code>，具体操作详情查看上述的<code>web.xml</code>文件</li>
<li><code>SpringMVC</code>中处理编码的过滤器一定要配置到其他过滤器之前，否则无效</li>
</ul>
</li>
</ul>
<h2 id="4-域对象共享数据">4 域对象共享数据<a hidden class="anchor" aria-hidden="true" href="#4-域对象共享数据">#</a></h2>
<h3 id="41-request域">4.1 <code>request</code>域<a hidden class="anchor" aria-hidden="true" href="#41-request域">#</a></h3>
<ul>
<li>
<p>使用ServletAPI向request域对象共享数据</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#f00">@</span>RequestMapping(<span style="color:#0ff;font-weight:bold">&#34;/testServletAPI&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">String</span> testServletAPI(HttpServletRequest request){
</span></span><span style="display:flex;"><span>    request.setAttribute(<span style="color:#0ff;font-weight:bold">&#34;testScope&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;hello,servletAPI&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> <span style="color:#0ff;font-weight:bold">&#34;success&#34;</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>使用ModelAndView向request域对象共享数据</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@RequestMapping(<span style="color:#0ff;font-weight:bold">&#34;/testModelAndView&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> ModelAndView testModelAndView(){
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">/**
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * ModelAndView有Model和View的功能
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * Model主要用于向请求域共享数据
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     * View主要用于设置视图，实现页面跳转
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">     */</span>
</span></span><span style="display:flex;"><span>    ModelAndView mav = <span style="color:#fff;font-weight:bold">new</span> ModelAndView();
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//向请求域共享数据
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    mav.<span style="color:#007f7f">addObject</span>(<span style="color:#0ff;font-weight:bold">&#34;testScope&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;hello,ModelAndView&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//设置视图，实现页面跳转
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    mav.<span style="color:#007f7f">setViewName</span>(<span style="color:#0ff;font-weight:bold">&#34;success&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> mav;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>使用Model向request域对象共享数据</p>
<ul>
<li><code>model</code>方式用的比较多</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@RequestMapping(<span style="color:#0ff;font-weight:bold">&#34;/testModel&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> String testModel(Model model){
</span></span><span style="display:flex;"><span>    model.<span style="color:#007f7f">addAttribute</span>(<span style="color:#0ff;font-weight:bold">&#34;testScope&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;hello,Model&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> <span style="color:#0ff;font-weight:bold">&#34;success&#34;</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>使用map向request域对象共享数据</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@RequestMapping(<span style="color:#0ff;font-weight:bold">&#34;/testMap&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> String testMap(Map&lt;String, Object&gt; map){
</span></span><span style="display:flex;"><span>    map.<span style="color:#007f7f">put</span>(<span style="color:#0ff;font-weight:bold">&#34;testScope&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;hello,Map&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> <span style="color:#0ff;font-weight:bold">&#34;success&#34;</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>使用ModelMap向request域对象共享数据</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@RequestMapping(<span style="color:#0ff;font-weight:bold">&#34;/testModelMap&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> String testModelMap(ModelMap modelMap){
</span></span><span style="display:flex;"><span>    modelMap.<span style="color:#007f7f">addAttribute</span>(<span style="color:#0ff;font-weight:bold">&#34;testScope&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;hello,ModelMap&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> <span style="color:#0ff;font-weight:bold">&#34;success&#34;</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>Model、ModelMap、Map的关系</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">interface</span> Model{}
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> ModelMap <span style="color:#fff;font-weight:bold">extends</span> LinkedHashMap&lt;String, Object&gt; {}
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> ExtendedModelMap <span style="color:#fff;font-weight:bold">extends</span> ModelMap <span style="color:#fff;font-weight:bold">implements</span> Model {}
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> BindingAwareModelMap <span style="color:#fff;font-weight:bold">extends</span> ExtendedModelMap {}
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h3 id="42-session域">4.2 <code>session</code>域<a hidden class="anchor" aria-hidden="true" href="#42-session域">#</a></h3>
<ul>
<li>
<p>直接使用<code>HttpSession</code></p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@RequestMapping(<span style="color:#0ff;font-weight:bold">&#34;/testSession&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> String testSession(HttpSession session){
</span></span><span style="display:flex;"><span>    session.<span style="color:#007f7f">setAttribute</span>(<span style="color:#0ff;font-weight:bold">&#34;testSessionScope&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;hello,session&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> <span style="color:#0ff;font-weight:bold">&#34;success&#34;</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h3 id="43-application域">4.3 <code>application</code>域<a hidden class="anchor" aria-hidden="true" href="#43-application域">#</a></h3>
<ul>
<li>
<p>通过<code>ServletContext application = session.getServletContext();</code>来添加对应的数据</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@RequestMapping(<span style="color:#0ff;font-weight:bold">&#34;/testApplication&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> String testApplication(HttpSession session){
</span></span><span style="display:flex;"><span>	ServletContext application = session.<span style="color:#007f7f">getServletContext</span>();
</span></span><span style="display:flex;"><span>    application.<span style="color:#007f7f">setAttribute</span>(<span style="color:#0ff;font-weight:bold">&#34;testApplicationScope&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;hello,application&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> <span style="color:#0ff;font-weight:bold">&#34;success&#34;</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h2 id="5-视图">5 视图<a hidden class="anchor" aria-hidden="true" href="#5-视图">#</a></h2>
<ul>
<li>
<p><code>SpringMVC</code>中的视图是View接口，视图的作用渲染数据，将模型Model中的数据展示给用户</p>
</li>
<li>
<p><code>SpringMVC</code>视图的种类很多，默认有转发视图和重定向视图</p>
</li>
<li>
<p>视图步骤</p>
<ul>
<li>
<p>当控制器方法中所设置的视图名称没有任何前缀时，此时的视图名称会被SpringMVC配置文件中所配置的视图解析器解析，视图名称拼接视图前缀和视图后缀所得到的最终路径，会通过转发的方式实现跳转</p>
<ul>
<li>
<p>这里以<code>thymeleaf</code>为例</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@RequestMapping(<span style="color:#0ff;font-weight:bold">&#34;/testHello&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> String testHello(){
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> <span style="color:#0ff;font-weight:bold">&#34;hello&#34;</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><strong><img loading="lazy" src="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/image-20220429100335569.png" alt="image-20220429100335569"  />
</strong></li>
</ul>
</li>
</ul>
</li>
<li>
<p>当控制器方法中所设置的视图名称以<code>&quot;forward:&quot;</code>为前缀时，创建<code>InternalResourceView</code>视图，此时的视图名称不会被<code>SpringMVC</code>配置文件中所配置的视图解析器解析，而是会将前缀<code>&quot;forward:&quot;</code>去掉，剩余部分作为最终路径通过转发的方式实现跳转</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@RequestMapping(<span style="color:#0ff;font-weight:bold">&#34;/testForward&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> String testForward(){
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> <span style="color:#0ff;font-weight:bold">&#34;forward:/testHello&#34;</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><img loading="lazy" src="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/image-20220429100504389.png" alt="image-20220429100504389"  />
</li>
</ul>
</li>
<li>
<p>当控制器方法中所设置的视图名称以<code>&quot;redirect:&quot;</code>为前缀时，创建<code>RedirectView</code>视图，此时的视图名称不会被<code>SpringMVC</code>配置文件中所配置的视图解析器解析，而是会将前缀<code>&quot;redirect:&quot;</code>去掉，剩余部分作为最终路径通过重定向的方式实现跳转</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@RequestMapping(<span style="color:#0ff;font-weight:bold">&#34;/testRedirect&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> String testRedirect(){
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> <span style="color:#0ff;font-weight:bold">&#34;redirect:/testHello&#34;</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><img loading="lazy" src="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/image-20220429100617786.png" alt="image-20220429100617786"  />
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="6-restful">6 <code>Restful</code><a hidden class="anchor" aria-hidden="true" href="#6-restful">#</a></h2>
<ul>
<li>
<p>它们分别对应四种基本操作：GET 用来获取资源，POST 用来新建资源，PUT 用来更新资源，DELETE 用来删除资源。</p>
</li>
<li>
<p>REST 风格提倡 URL 地址使用统一的风格设计，从前到后各个单词使用斜杠分开，不使用问号键值对方式携带请求参数，而是将要发送给服务器的数据作为 URL 地址的一部分，以保证整体风格的一致性。</p>
<table>
<thead>
<tr>
<th>操作</th>
<th>传统方式</th>
<th>REST风格</th>
</tr>
</thead>
<tbody>
<tr>
<td>查询操作</td>
<td>getUserById?id=1</td>
<td>user/1&ndash;&gt;get请求方式</td>
</tr>
<tr>
<td>保存操作</td>
<td>saveUser</td>
<td>user&ndash;&gt;post请求方式</td>
</tr>
<tr>
<td>删除操作</td>
<td>deleteUser?id=1</td>
<td>user/1&ndash;&gt;delete请求方式</td>
</tr>
<tr>
<td>更新操作</td>
<td>updateUser</td>
<td>user&ndash;&gt;put请求方式</td>
</tr>
</tbody>
</table>
</li>
<li>
<p><code>SpringMVC</code>给予解决方案</p>
<ul>
<li>
<p>SpringMVC 提供了 <code>HiddenHttpMethodFilter</code> 帮助我们<strong>将 POST 请求转换为 DELETE 或 PUT 请求</strong></p>
<ul>
<li>当前请求的请求方式必须为<code>post</code></li>
<li>当前请求必须传输请求参数<code>_method</code></li>
</ul>
</li>
<li>
<p>在<code>web.xml</code>里面找注册</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="font-weight:bold">&lt;filter&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;filter-name&gt;</span>HiddenHttpMethodFilter<span style="font-weight:bold">&lt;/filter-name&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;filter-class&gt;</span>org.springframework.web.filter.HiddenHttpMethodFilter<span style="font-weight:bold">&lt;/filter-class&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/filter&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;filter-mapping&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;filter-name&gt;</span>HiddenHttpMethodFilter<span style="font-weight:bold">&lt;/filter-name&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;url-pattern&gt;</span>/*<span style="font-weight:bold">&lt;/url-pattern&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/filter-mapping&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>对应提交过来的请求中应该包含参数</p>
<ul>
<li>参数名：<code>_method</code></li>
<li><code>value</code>:<code>PUT</code> or  <code>DELETE</code></li>
<li>传输的请求方式必须为<code>POST</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="7-文件上传下载">7 文件上传下载<a hidden class="anchor" aria-hidden="true" href="#7-文件上传下载">#</a></h2>
<ul>
<li>
<p>文件下载</p>
<ul>
<li>
<p>使用<code>ResponseEntity</code>实现下载文件的功能</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">// 实际使用的时候，将需要下载的路径作为参数传递即可
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>@RequestMapping(<span style="color:#0ff;font-weight:bold">&#34;/testDown&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> ResponseEntity&lt;<span style="color:#fff;font-weight:bold">byte</span>[]&gt; testResponseEntity(HttpSession session) <span style="color:#fff;font-weight:bold">throws</span> IOException {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//获取ServletContext对象
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    ServletContext servletContext = session.<span style="color:#007f7f">getServletContext</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//获取服务器中文件的真实路径
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    String realPath = servletContext.<span style="color:#007f7f">getRealPath</span>(<span style="color:#0ff;font-weight:bold">&#34;/static/img/1.jpg&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//创建输入流
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    InputStream is = <span style="color:#fff;font-weight:bold">new</span> FileInputStream(realPath);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//创建字节数组
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">byte</span>[] bytes = <span style="color:#fff;font-weight:bold">new</span> <span style="color:#fff;font-weight:bold">byte</span>[is.<span style="color:#007f7f">available</span>()];
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//将流读到字节数组中
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    is.<span style="color:#007f7f">read</span>(bytes);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//创建HttpHeaders对象设置响应头信息
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    MultiValueMap&lt;String, String&gt; headers = <span style="color:#fff;font-weight:bold">new</span> HttpHeaders();
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//设置要下载方式以及下载文件的名字
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    headers.<span style="color:#007f7f">add</span>(<span style="color:#0ff;font-weight:bold">&#34;Content-Disposition&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;attachment;filename=1.jpg&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//设置响应状态码
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    HttpStatus statusCode = HttpStatus.<span style="color:#007f7f">OK</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//创建ResponseEntity对象
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    ResponseEntity&lt;<span style="color:#fff;font-weight:bold">byte</span>[]&gt; responseEntity = <span style="color:#fff;font-weight:bold">new</span> ResponseEntity&lt;&gt;(bytes, headers, statusCode);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//关闭输入流
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    is.<span style="color:#007f7f">close</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> responseEntity;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
</li>
<li>
<p>文件上传</p>
<ul>
<li>
<p>文件上传要求form表单的请求方式必须为post，并且添加属性<code>enctype=&quot;multipart/form-data&quot;</code></p>
</li>
<li>
<p>SpringMVC中将上传的文件封装到<code>MultipartFile</code>对象中，通过此对象可以获取文件相关信息</p>
</li>
<li>
<p>步骤</p>
<ul>
<li>
<p>添加依赖</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#007f7f">&lt;!-- https://mvnrepository.com/artifact/commons-fileupload/commons-fileupload --&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;groupId&gt;</span>commons-fileupload<span style="font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;artifactId&gt;</span>commons-fileupload<span style="font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">&lt;version&gt;</span>1.3.1<span style="font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>在<code>SpringMVC.xml</code>里面注册组件</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#007f7f">&lt;!--必须通过文件解析器的解析才能将文件转换为MultipartFile对象--&gt;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">&lt;bean</span> <span style="color:#007f7f">id=</span><span style="color:#0ff;font-weight:bold">&#34;multipartResolver&#34;</span> <span style="color:#007f7f">class=</span><span style="color:#0ff;font-weight:bold">&#34;org.springframework.web.multipart.commons.CommonsMultipartResolver&#34;</span><span style="font-weight:bold">&gt;&lt;/bean&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>实际方法</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>@RequestMapping(<span style="color:#0ff;font-weight:bold">&#34;/testUp&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> String testUp(MultipartFile photo, HttpSession session) <span style="color:#fff;font-weight:bold">throws</span> IOException {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//获取上传的文件的文件名
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    String fileName = photo.<span style="color:#007f7f">getOriginalFilename</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//处理文件重名问题
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    String hzName = fileName.<span style="color:#007f7f">substring</span>(fileName.<span style="color:#007f7f">lastIndexOf</span>(<span style="color:#0ff;font-weight:bold">&#34;.&#34;</span>));
</span></span><span style="display:flex;"><span>    fileName = UUID.<span style="color:#007f7f">randomUUID</span>().<span style="color:#007f7f">toString</span>() + hzName;
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//获取服务器中photo目录的路径
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    ServletContext servletContext = session.<span style="color:#007f7f">getServletContext</span>();
</span></span><span style="display:flex;"><span>    String photoPath = servletContext.<span style="color:#007f7f">getRealPath</span>(<span style="color:#0ff;font-weight:bold">&#34;photo&#34;</span>);
</span></span><span style="display:flex;"><span>    File file = <span style="color:#fff;font-weight:bold">new</span> File(photoPath);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span>(!file.<span style="color:#007f7f">exists</span>()){
</span></span><span style="display:flex;"><span>        file.<span style="color:#007f7f">mkdir</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    String finalPath = photoPath + File.<span style="color:#007f7f">separator</span> + fileName;
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//实现上传功能
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    photo.<span style="color:#007f7f">transferTo</span>(<span style="color:#fff;font-weight:bold">new</span> File(finalPath));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> <span style="color:#0ff;font-weight:bold">&#34;success&#34;</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="8-拦截器">8 拦截器<a hidden class="anchor" aria-hidden="true" href="#8-拦截器">#</a></h2>
<ul>
<li>SpringMVC中的拦截器有三个抽象方法：
<ul>
<li><code>preHandle</code>：控制器方法执行之前执行<code>preHandle()</code>，其boolean类型的返回值表示是否拦截或放行，返回true为放行，即调用控制器方法；返回false表示拦截，即不调用控制器方法</li>
<li><code>postHandle</code>：控制器方法执行之后执行postHandle()</li>
<li><code>afterComplation</code>：处理完视图和模型数据，渲染视图完毕之后执行afterComplation()</li>
</ul>
</li>
<li>多个拦截器一起工作的时候
<ul>
<li><code>preHandle</code>之前的顺序按照<code>SpringMVC.xml</code>里面组件注册的先后顺序执行，并相当于以<code>栈</code>的形式压入。</li>
<li>后面的按照出栈的形式执行。</li>
<li>如果一个拦截器的<code>preHandle</code>返回<code>false</code>，则其之后的拦截器的都不会执行，<code>postHandle()</code>都不执行，返回false的拦截器之前的拦截器的<code>afterComplation()</code>会执行</li>
</ul>
</li>
</ul>
<h2 id="9-异常处理">9 异常处理<a hidden class="anchor" aria-hidden="true" href="#9-异常处理">#</a></h2>
<ul>
<li>
<p>SpringMVC提供了自定义的异常处理器<code>SimpleMappingExceptionResolver</code>，使用方式：</p>
</li>
<li>
<p>基于注解</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#007f7f">//@ControllerAdvice将当前类标识为异常处理的组件
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>@ControllerAdvice
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> ExceptionController {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//@ExceptionHandler用于设置所标识方法处理的异常
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    @ExceptionHandler(ArithmeticException.<span style="color:#007f7f">class</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">//ex表示当前请求处理中出现的异常对象
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">public</span> String handleArithmeticException(Exception ex, Model model){
</span></span><span style="display:flex;"><span>        model.<span style="color:#007f7f">addAttribute</span>(<span style="color:#0ff;font-weight:bold">&#34;ex&#34;</span>, ex);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#0ff;font-weight:bold">&#34;error&#34;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h2 id="10-springmvc执行流程">10 <code>SpringMVC</code>执行流程<a hidden class="anchor" aria-hidden="true" href="#10-springmvc执行流程">#</a></h2>
<ul>
<li>
<p>用户向服务器发送请求，请求被SpringMVC 前端控制器 DispatcherServlet捕获。</p>
</li>
<li>
<p>DispatcherServlet对请求URL进行解析，得到请求资源标识符（URI），判断请求URI对应的映射：</p>
<ul>
<li>
<p>a) 不存在</p>
<ul>
<li>i. 再判断是否配置了mvc:default-servlet-handler</li>
<li>ii. 如果没配置，则控制台报映射查找不到，客户端展示404错误
<ul>
<li><img loading="lazy" src="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/img006.png" alt="image-20210709214911404"  />
</li>
<li><img loading="lazy" src="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/img007.png" alt="image-20210709214947432"  />
</li>
<li>iii. 如果有配置，则访问目标资源（一般为静态资源，如：JS,CSS,HTML)，找不到客户端也会展示404错误
<ul>
<li><img loading="lazy" src="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/img008.png" alt="image-20210709215255693"  />
</li>
<li><img loading="lazy" src="https://cnblog-img-reus09.oss-cn-beijing.aliyuncs.com/image/img009.png" alt="image-20210709215336097"  />
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>b) 存在则执行下面的流程</p>
</li>
</ul>
</li>
</ul>
<ol start="3">
<li>
<p>根据该URI，调用<code>HandlerMapping</code>获得该<code>Handler</code>配置的所有相关的对象（包括Handler对象以及Handler对象对应的拦截器），最后以<code>HandlerExecutionChain</code>执行链对象的形式返回。</p>
</li>
<li>
<p><code>DispatcherServlet</code> 根据获得的<code>Handler</code>，选择一个合适的<code>HandlerAdapter。</code></p>
</li>
<li>
<p>如果成功获得<code>HandlerAdapter</code>，此时将开始执行拦截器的<code>preHandler(…)</code>方法【正向】</p>
</li>
<li>
<p>提取Request中的模型数据，填充Handler入参，开始执行<code>Handler（Controller)</code>方法，处理请求。在填充<code>Handler</code>的入参过程中，根据你的配置，Spring将帮你做一些额外的工作：</p>
<ul>
<li>a) <code>HttpMessageConveter</code>： 将请求消息（如Json、xml等数据）转换成一个对象，将对象转换为指定的响应信息</li>
<li>b) 数据转换：对请求消息进行数据转换。如String转换成Integer、Double等</li>
<li>c) 数据格式化：对请求消息进行数据格式化。 如将字符串转换成格式化数字或格式化日期等</li>
<li>d) 数据验证： 验证数据的有效性（长度、格式等），验证结果存储到<code>BindingResult</code>或<code>Error</code>中</li>
</ul>
</li>
<li>
<p>Handler执行完成后，向<code>DispatcherServlet</code> 返回一个<code>ModelAndView</code>对象。</p>
</li>
<li>
<p>此时将开始执行拦截器的<code>postHandle</code>(&hellip;)方法【逆向】。</p>
</li>
<li>
<p>根据返回的<code>ModelAndView</code>（此时会判断是否存在异常：如果存在异常，则执行<code>HandlerExceptionResolver</code>进行异常处理）选择一个适合的<code>ViewResolver</code>进行视图解析，根据Model和View，来渲染视图。</p>
</li>
<li>
<p>渲染视图完毕执行拦截器的<code>afterCompletion(…)</code>方法【逆向】。</p>
</li>
<li>
<p>将渲染结果返回给客户端。</p>
</li>
</ol>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://www.reus09.top/tags/ssm/">SSM</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="http://www.reus09.top/posts/tech/mybatis/">
    <span class="title">« Prev</span>
    <br>
    <span>Mybatis</span>
  </a>
  <a class="next" href="http://www.reus09.top/posts/tech/spring/">
    <span class="title">Next »</span>
    <br>
    <span>Spring</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="http://www.reus09.top">Reus09&#39;s Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
